
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Android Unit Test 101 - Kent's Blog</title>
  <meta name="author" content="Kent">

  
  <meta name="description" content="這邊並不算真正的unit
test，因為整個測試還是需要模擬器或實機執行，而且很依賴測試環境的context，如果有需要
也是會去連網路或資料庫。 準備工作 要進行Android Testing通常是把test cases建立在另一個Test
Project而不是像一般的java(maven &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.kent-chiu.com/blog/2012/04/13/unit_testing_in_android">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Kent's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39152849-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Kent's Blog</a></h1>
  
    <h2>Kent的學習筆記</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.kent-chiu.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Android Unit Test 101</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-13T00:00:00+08:00" pubdate data-updated="true">Apr 13<span>th</span>, 2012</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>這邊並不算真正的unit
test，因為整個測試還是需要模擬器或實機執行，而且很依賴測試環境的context，如果有需要
也是會去連網路或資料庫。</p>

<h1>準備工作</h1>

<p>要進行Android Testing通常是把test cases建立在另一個Test
Project而不是像一般的java(maven base)目錄結構一樣
在同一個project建立test folder.</p>

<p>Testing project可透過eclipse的android project
wizard建立，建立後記得先把production project裡用到的lib export出來給test
project使用</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-13/unit_testing_in_android_003.png" alt="unit_testing_in_android_003.png" /></p>

<p>而測試專案只需要放只有測試時會用到的lib，因為Tesing
Project有reference到Production Project，所以會一併引用Production Project
export 出來的lib。</p>

<p>一般習慣把被測的程式的專案叫Production
project(或<a href="http://xunitpatterns.com/SUT.html" title="http://xunitpatterns.com/SUT.html">SUT</a>)，
而測試程式專案叫Testing Project</p>

<h1>Android測試架構</h1>

<ul>
<li>測試方式是透過建立測試專案來測試待測專案(<a href="http://xunitpatterns.com/SUT.html" title="http://xunitpatterns.com/SUT.html">SUT</a>)</li>
<li>需啟動Android
OS，所以是屬於整合測試，而不是單元測試(像是eclipse的plugin測試方式)</li>
<li>需繼承特定的TestCase以便可以取得一些測試的基本功能</li>
</ul>


<p><img src="http://developer.android.com/images/testing/android_test_framework.png" alt="" /></p>

<p>Android應用程式跟測試程式透過Instrumentation Test
Runner執行在同一個Process, 所以，在執行測試時，需透過Instrumentation
Test Runner。</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-13/unit_testing_in_android_001.png" alt="unit_testing_in_android_001.png" /></p>

<p>測試分為兩大類</p>

<ol>
<li>Instrumentation Testing</li>
<li>Android Testing</li>
</ol>


<h3>Instrumentation Testing</h3>

<p>這類型的testing會啟動instrumentation Test Runner。
Instrumentation可以使用instrumentation framework，有了Instrumentation
framework，可以透過Android的事件處理系統傳送訊息給Android應用程式，以便於模擬像”收到mail”，”收到簡訊”，”有電話calling進來”等等的動作，或者是對UI進行自動化測試。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>TestCase
</span><span class='line'> |
</span><span class='line'> `- InstrumentationTestCase
</span><span class='line'>    |
</span><span class='line'>    `- ActivityTestCase
</span><span class='line'>    |  |
</span><span class='line'>    |  `- ActivityInstrumentationTestCase&lt;T&gt;
</span><span class='line'>    |  |
</span><span class='line'>    |  `- ActivityInstrumentationTestCase2&lt;T&gt;
</span><span class='line'>    |  |
</span><span class='line'>    |  `- ActivityUnitTestCase&lt;T&gt;
</span><span class='line'>    |
</span><span class='line'>    `- ProviderTestCase&lt;T&gt;
</span><span class='line'>    |
</span><span class='line'>    `- SingleLaunchActivityTestCase&lt;T&gt;
</span><span class='line'>    |
</span><span class='line'>    `- SyncBaseInstrumentation</span></code></pre></td></tr></table></div></figure>


<h3>Android Testing</h3>

<p>提供Context給測試程式</p>

<p>以下的TestCase提供跟Android應用程式相關的Context，透過Context，可以取到Android的檔案系統，資料庫，資源檔…。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>TestCase
</span><span class='line'> |
</span><span class='line'> `- AndroidTestCase
</span><span class='line'>    |
</span><span class='line'>    `- ProviderTestCase2&lt;T&gt;
</span><span class='line'>    |
</span><span class='line'>    `- ServiceTestCase&lt;T&gt;
</span><span class='line'>    |
</span><span class='line'>    `- ApplicationTestCase&lt;T&gt;</span></code></pre></td></tr></table></div></figure>


<p>XxxTestCase2&lt;T>中的<code>tempalte &lt;T&gt;</code>在使用時要宣告成要被測試的class，就像泛型容器的用法一樣
ex: <code>List&lt;MyClass&gt;</code></p>

<h3>AndroidTestCase Or InstrumentationTestCase</h3>

<h5>AndroidTestCase V.S InstrumentationTestCase</h5>

<p>如果測試的對象是ui元件的話，那就必需要用InstrumentationTestCase體系的test
cases，如果要測試non-UI的功能，像permissions之類的功能，那使用AndroidTestCase體系的的test
case即可。
@UiThreadTest(android.test.UiThreadTest)是使用在InstrumentationTestCase的test
method上，用來標明該method會存取UI元件，需要在main thread執行。
或者是，測試時需要使用到test project裡才有的resource(assets, res, …
目錄下的東西)，那就得使用InstrumentationTestCase，因為InstrumentationTestCase才會去處理test
project下的AndroidManifest.xml。</p>

<p>元件測試或應用程式測試，元件測試主要是以下三種</p>

<ol>
<li><a href="http://developer.android.com/guide/topics/testing/activity_testing.html" title="http://developer.android.com/guide/topics/testing/activity_testing.html">Activity
Testing</a></li>
<li><a href="http://developer.android.com/guide/topics/testing/contentprovider_testing.html" title="http://developer.android.com/guide/topics/testing/contentprovider_testing.html">Content Provider
Testing</a></li>
<li><a href="http://developer.android.com/guide/topics/testing/service_testing.html" title="http://developer.android.com/guide/topics/testing/service_testing.html">Service
Testing</a></li>
</ol>


<p>而應該程式測試測是測試<a href="http://developer.android.com/reference/android/app/Application.html" title="http://developer.android.com/reference/android/app/Application.html">Application</a></p>

<ol>
<li><a href="http://developer.android.com/guide/topics/testing/service_testing.html" title="http://developer.android.com/guide/topics/testing/service_testing.html">ApplicationTestCase</a></li>
</ol>


<p><a href="http://developer.android.com/reference/android/test/TouchUtils.html" title="http://developer.android.com/reference/android/test/TouchUtils.html">TouchUtils</a>
(android.test.TouchUtils)可用來產生touch
events，通常在InstrumentationTestCase or
ActivityInstrumentationTestCase2中使用。</p>

<h1>TestCases</h1>

<ul>
<li><p><a href="#androidtestcase" title="android:unit_testing_in_android ↵">AndroidTestCase</a></p>

<ol>
<li><a href="#providertestcase2" title="android:unit_testing_in_android ↵">ProviderTestCase2</a></li>
<li><a href="#servicetestcase" title="android:unit_testing_in_android ↵">ServiceTestCase</a></li>
<li><a href="#applicationtestcase" title="android:unit_testing_in_android ↵">ApplicationTestCase</a></li>
</ol>
</li>
<li><p><a href="#instrumentationtestcase" title="android:unit_testing_in_android ↵">InstrumentationTestCase</a></p>

<ol>
<li><p><a href="#activitytestcase" title="android:unit_testing_in_android ↵">ActivityTestCase</a></p>

<ol>
<li><a href="#activityinstrumentationtestcase" title="android:unit_testing_in_android ↵">ActivityInstrumentationTestCase</a></li>
<li><a href="#activityinstrumentationtestcase2" title="android:unit_testing_in_android ↵">ActivityInstrumentationTestCase2</a></li>
<li><a href="#activityunittestcase" title="android:unit_testing_in_android ↵">ActivityUnitTestCase</a></li>
</ol>
</li>
<li><p><a href="#providertestcase" title="android:unit_testing_in_android ↵">ProviderTestCase</a></p></li>
<li><a href="#singlelaunchactivitytestcase" title="android:unit_testing_in_android ↵">SingleLaunchActivityTestCase</a></li>
<li><a href="#syncbaseinstrumentation" title="android:unit_testing_in_android ↵">SyncBaseInstrumentation</a></li>
</ol>
</li>
</ul>


<h3>AndroidTestCase</h3>

<p>提供context是在Android
Framework中最重要的一個物件，在許多地方都會用到它，<code>這邊的context是test project的context</code>。
AndroidTestCase啟動時，會先做自我檢測，先驗証測試環境是否ready to
use.有提供幾個預先定義好的assert.</p>

<h3>ProviderTestCase2</h3>

<p>測試Provider的test
case,如果要測試資料而非UI的話，那測試的對象應該是<a href="http://developer.android.com/guide/topics/providers/content-providers.html" title="http://developer.android.com/guide/topics/providers/content-providers.html">Content
Provider</a>及Content
Provider用到的相關物件。</p>

<p>Android Test Framework有提供ProviderTestCase2可以Content
Provider進行獨立的測試。使用方式如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public class MyContentProviderTest extends ProviderTestCase2&lt;MyContentProvider&gt; {
</span><span class='line'> 
</span><span class='line'>    public MyContentProviderTest() {
</span><span class='line'>        super(MyContentProvider.class, MyContentProvider.class.getName());
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    @Override
</span><span class='line'>    protected void setUp() throws Exception {
</span><span class='line'>        super.setUp();
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testInsert() throws Exception {
</span><span class='line'>        ContentValues values = new ContentValues();
</span><span class='line'>        values.put("name", "foo");
</span><span class='line'>        getProvider().insert("context://xxx/xx", values);
</span><span class='line'>        // do assert here
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testQuery() throws Exception {
</span><span class='line'>        getProvider().query("context://xxx/xx", null, null, null, null);
</span><span class='line'>        // do assert here
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>此例中，測是對象為MyContentProvider,使用上要注意的有：</p>

<ol>
<li><p>Testcase要繼承自<a href="http://developer.android.com/reference/android/test/ProviderTestCase2.html" title="http://developer.android.com/reference/android/test/ProviderTestCase2.html">ProviderTestCase2</a></p>

<ul>
<li>可以將<code>ProviderTestCase2&lt;T&gt;</code>的template
&lt;T>指定成對象為MyContentProvider，這樣可以testcase內就會引用MyContentProvider而非ContentProvider</li>
</ul>
</li>
<li><p>必須要建立一個無參數的建構子(Constructor)</p></li>
<li><p>Constructor裡必須呼叫<code>super(MyContentProvider.class, MyContentProvider.class.getName());</code></p>

<ul>
<li>因為MyContentProvider的Authority為<code>MyContentProvider.class.getName()</code></li>
</ul>
</li>
<li><p>Testcase中透過getProvider()來取得MyContentProvider的instance，而不是自已創建MyContentProvider的instance</p></li>
</ol>


<h3>ServiceTestCase</h3>

<p>ServiceTestCase可以用來測試Android Service,ServiceTestCase</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-13/unit_testing_in_android_002.png" alt="unit_testing_in_android_002.png" /></p>

<p>基本的使用方式如下：</p>

<ol>
<li>宣告class時，把<code>template &lt;T&gt;</code>換成要被測試的Service(Service Under
Test)</li>
<li>建立default的constructor，並呼叫parent的constructor，代入class name</li>
<li>setUp()時，ServiceTestCase會將real context儲存到systemContext</li>
<li>透過startService()或bindService()啟動service
(呼叫service.onCreate())</li>
<li>test case的tearDown()會stop 跟 destroy service</li>
<li>如果有需要的話，可以透過setCotext()或setApplication()換掉test
case裡的context跟application.</li>
</ol>


<p>ServiceTestCase預設是使用MockApplication + Test Proejct的Context</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public abstract class ServiceTestCase&lt;T extends Service&gt; extends AndroidTestCase {
</span><span class='line'>    protected void setupService() {
</span><span class='line'>        mService = null;
</span><span class='line'>        try {
</span><span class='line'>            mService = mServiceClass.newInstance();
</span><span class='line'>        } catch (Exception e) {
</span><span class='line'>            assertNotNull(mService);
</span><span class='line'>        }
</span><span class='line'>        if (getApplication() == null) {
</span><span class='line'>            setApplication(new MockApplication());  // 使用mock版的Application()，而不是真正的
</span><span class='line'>        }
</span><span class='line'>        mService.attach(getContext(), null,  mServiceClass.getName(), null, getApplication(), null);
</span><span class='line'>        assertNotNull(mService);
</span><span class='line'>        mServiceId = new Random().nextInt();
</span><span class='line'>        mServiceAttached = true;
</span><span class='line'>    }
</span><span class='line'>} </span></code></pre></td></tr></table></div></figure>


<p>Android有提供<a href="#renamingdelegatingcontext" title="android:unit_testing_in_android ↵">RenamingDelegatingContext</a>,
<a href="#contextwrapper" title="android:unit_testing_in_android ↵">ContextWrapper</a>,
<a href="#isolatedcontext" title="android:unit_testing_in_android ↵">IsolatedContext</a>跟<a href="#mockcontext" title="android:unit_testing_in_android ↵">MockContext</a>來換原MockContext，也可以自已Mock一個</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public class MyServiceTest extends ServiceTestCase&lt;MyService&gt; {
</span><span class='line'>    public MyServiceTest() {
</span><span class='line'>        super(MyService.class);
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p><img src="http://blog.kent-chiu.com/images/2012-04-13/unit_testing_in_android_002.png" alt="unit_testing_in_android_002.png" /></p>

<p>ServiceTestCase提供<code>getService()</code>可以取得要被測試的service，<code>getSystemContext()</code>可以取得test
project context</p>

<h5>getContext() vs getSystemContext()</h5>

<p>在預設的情況下，如果沒有特別去設定context，getContext(),getSystemContext()是同一個instance，但是
如果有設定mock版的context，ex:
<code>setConext(new MockContext());</code>，那麼getContext()會取到mock版的，
而getSystemContext()會取到原來的(測試專案的)。</p>

<h3>ApplicationTestCase</h3>

<p>測試Application的test case</p>

<h3>InstrumentationTestCase</h3>

<h3>ActivityTestCase</h3>

<h3>ActivityInstrumentationTestCase</h3>

<h3>ActivityInstrumentationTestCase2</h3>

<h3>ActivityUnitTestCase</h3>

<h3>ProviderTestCase</h3>

<h3>SingleLaunchActivityTestCase</h3>

<h3>SyncBaseInstrumentation</h3>

<h1>要測那些東西</h1>

<h5>Activity lifecycle events</h5>

<p>如果有在Activity lifecycle events像是onCreate(), onResume(), onPause(),
…中保存activity的狀態，那麼應該要對這些methods進行測式，而當
Configuration-changed事件發生時，也需要確定這些event的動作都正確。</p>

<p><img src="http://developer.android.com/images/activity_lifecycle.png" alt="" /></p>

<p>TestCase :
<a href="#activityinstrumentationtestcase2" title="android:unit_testing_in_android ↵">ActivityInstrumentationTestCase2</a>
(大多數情況用這個),
<a href="#activitytestcase" title="android:unit_testing_in_android ↵">ActivityTestCase</a>,
<a href="#singlelaunchactivitytestcase" title="android:unit_testing_in_android ↵">SingleLaunchActivityTestCase</a></p>

<h5>Content Provder</h5>

<p>Content
Provder在大部份的情況下，不需要自行建立，也不建議直接建立，所以，Content
Provder在測試時， Insert, Update, Query,
Delete等method，還有getType()這些基本的methods都要被測到，如果沒有必要的話，
儘量不要自已publish額外的method，因為在程式裡，只能取到ContentProvder型別，無法直接取得子型別(除非透過型別轉換，但不建議)，
所以，ContentProvider的子類別，應儘量避免publish額外的API.</p>

<p>TestCase :
<a href="#providertestcase2" title="android:unit_testing_in_android ↵">ProviderTestCase2</a></p>

<h5>ListView Adapter</h5>

<p>ListView用的Adapter，ListView是UI裡很重要的一個元件，幾乎每個應該程式都會用到，而ListView
Adapter又是ListView中 主要的元件，對Adapter測試的重要性，不言可喻。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public class ScriptListAdapterTest extends AndroidTestCase {
</span><span class='line'> 
</span><span class='line'>    public void testExtractWords_none_words() throws Exception {
</span><span class='line'>        ScriptListAdapter adapter = new ScriptListAdapter(getContext(), R.layout.script_list_item, R.id.scriptLine, ImmutableList.&lt;String&gt; of());
</span><span class='line'>        adapter.setRichScript("foo bar");
</span><span class='line'>        assertThat(adapter.extractWord(), Matchers.&lt;String&gt; emptyIterable());
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testExtractWords_one_word() throws Exception {
</span><span class='line'>        ScriptListAdapter adapter = new ScriptListAdapter(getContext(), R.layout.script_list_item, R.id.scriptLine, ImmutableList.&lt;String&gt; of());
</span><span class='line'>        adapter.setRichScript("foo &lt;b&gt;bar&lt;/b&gt; baz");
</span><span class='line'>        Iterable&lt;String&gt; words = adapter.extractWord();
</span><span class='line'>        assertThat(words, hasItem("bar"));
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testExtractWords_two_words() throws Exception {
</span><span class='line'>        ScriptListAdapter adapter = new ScriptListAdapter(getContext(), R.layout.script_list_item, R.id.scriptLine, ImmutableList.&lt;String&gt; of());
</span><span class='line'>        adapter.setRichScript("&lt;b&gt;foo&lt;/b&gt; bar &lt;b&gt;baz&lt;/b&gt;");
</span><span class='line'>        Iterable&lt;String&gt; words = adapter.extractWord();
</span><span class='line'>        assertThat(words, hasItems("foo", "baz"));
</span><span class='line'>        assertThat(words, not(hasItem("bar")));
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testRichText() throws Exception {
</span><span class='line'>        ScriptListAdapter adapter = new ScriptListAdapter(getContext(), R.layout.script_list_item, R.id.scriptLine, ImmutableList.&lt;String&gt; of());
</span><span class='line'>        CharSequence text = adapter.richText("this is a foo bar string", ImmutableList.of("foo", "string"));
</span><span class='line'>        System.out.println(text);
</span><span class='line'> 
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>TestCase :
<a href="#androidtestcase" title="android:unit_testing_in_android ↵">AndroidTestCase</a></p>

<h5>Database &amp; File</h5>

<p>我通常會對DatabaseHelper進行測試，以確定table可以正確的被建立或版更</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public class DatabaseHelperTest extends TestCase {
</span><span class='line'>    private DatabaseHelper    helper;
</span><span class='line'>    private SQLiteDatabase    db;
</span><span class='line'> 
</span><span class='line'>    @Override
</span><span class='line'>    public void tearDown() {
</span><span class='line'>        helper.close();
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testDictionaryBankTable() throws Exception {
</span><span class='line'>        Cursor c = db.query(DatabaseHelper.DICTIONARY_TABLE_NAME, null, null, null, null, null, null);
</span><span class='line'>        assertEquals(4, c.getColumnCount());
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testPodcastTable() throws Exception {
</span><span class='line'>        Cursor c = db.query(DatabaseHelper.PODCAST_TABLE_NAME, null, null, null, null, null, null);
</span><span class='line'>        assertEquals(13, c.getColumnCount());
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    public void testWordBankTable() throws Exception {
</span><span class='line'>        Cursor c = db.query(DatabaseHelper.WORD_BANK_TABLE_NAME, null, null, null, null, null, null);
</span><span class='line'>        assertEquals(2, c.getColumnCount());
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    @Override
</span><span class='line'>    protected void setUp() throws Exception {
</span><span class='line'>        super.setUp();
</span><span class='line'>        db = SQLiteDatabase.create(null);
</span><span class='line'>        helper = new DatabaseHelper(null, "podcast.db", null);
</span><span class='line'>        helper.onOpen(db);
</span><span class='line'>        helper.onCreate(db);
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>TestCase: 沒有用到android 的context，只需用Junit內建的TestCase即可</p>

<h5>Helper &amp; Utils</h5>

<p>Helper跟Utils指的是跟Android比較無關類別，有可能用到網路或檔案系統等的class，可視情況選擇用TestCase,
AndroidTestCase, InstrumentationTestCase
通常我都是先用最簡單的，如果不適合，再找次簡單的。</p>

<h1>Test Helper</h1>

<h3>Mock Objects</h3>

<p>Android Test Framework也有提供一列系的mock
objects，如果在測試時採用Depedency Injection的方式把這些mock
object注入，會讓測試更簡單，更獨立。 這些mock
oject被放在<a href="http://developer.android.com/reference/android/test/mock/package-summary.html" title="http://developer.android.com/reference/android/test/mock/package-summary.html">android.test.mock
package</a>內，主要有下列這些mock
objects</p>

<ol>
<li>MockApplication A mock Application class.</li>
<li>MockContentProvider Mock implementation of ContentProvider.</li>
<li>MockContentResolver An extension of ContentResolver that is designed
for testing.</li>
<li>MockContext A mock Context class.</li>
<li>MockCursor A mock Cursor class that isolates the test code from real
Cursor implementation.</li>
<li>MockDialogInterface A mock DialogInterface class.</li>
<li>MockPackageManager A mock PackageManager class.</li>
<li>MockResources A mock Resources class.</li>
</ol>


<p>這些class採的mock
strategy是stubbing而不是mocking，也就是說，使用時必須overwrite掉要提供資訊的methods</p>

<p>曾經試著將在Android test framework上使用幾個mock
framework，都失敗了，目前都是直接使用Android test
framework內建的mocks，雖不好用但可以接受。</p>

<ol>
<li>mockito 1.8.5 - 無法通過編譯，殘念</li>
<li>easymock 3 - extension的部份無法通過編譯，也就是只能mock
interface，殘念</li>
<li>powermock - 還是需要mocktio或easymock的jar，殘念</li>
<li>jmock - 沒試</li>
</ol>


<p><a href="https://sites.google.com/site/androiddevtesting/" title="https://sites.google.com/site/androiddevtesting/">這裡</a>有篇文章說明為何大多數的Mock
framework在Android上的無法正常動作， 只要是Mock
Framework有用到CGLib就無法在Dalvik
VM上執行，ex:EasyMock,Mockito都有用到這個lib</p>

<p>2012/3/16 己經有android team的member在將mockito
porting到android上了，或許不久的將來就有android
compatible的mockito可以用了 :) ，詳情 :
<a href="http://code.google.com/p/mockito/issues/detail?id=308" title="http://code.google.com/p/mockito/issues/detail?id=308">http://code.google.com/p/mockito/issues/detail?id=308</a></p>

<h3>Context For Testing</h3>

<p>Context的type hierarchy</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-13/unit_testing_in_android_002.png" alt="unit_testing_in_android_002.png" /></p>

<p>跟測試比較相關的有</p>

<ol>
<li><a href="#contextwrapper" title="android:unit_testing_in_android ↵">ContextWrapper</a></li>
<li><a href="#isolatedcontext" title="android:unit_testing_in_android ↵">IsolatedContext</a></li>
<li><a href="#renamingdelegatingcontext" title="android:unit_testing_in_android ↵">RenamingDelegatingContext</a></li>
<li><a href="#mockcontext" title="android:unit_testing_in_android ↵">MockContext</a></li>
</ol>


<h5>ContextWrapper</h5>

<p>嚴格來說，這個並不算是testing專用的，其他不少context也是從這個開始繼承的，他的實作很簡單
，就是把被wrapped的context的delegate給ContextWrapper，所以，每個method大多長這樣</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/**
</span><span class='line'> * Proxying implementation of Context that simply delegates all of its calls to
</span><span class='line'> * another Context.  Can be subclassed to modify behavior without changing
</span><span class='line'> * the original Context.
</span><span class='line'> */
</span><span class='line'>public class ContextWrapper extends Context {
</span><span class='line'>    Context mBase;
</span><span class='line'>
</span><span class='line'>    @Override
</span><span class='line'>    public AssetManager getAssets() {
</span><span class='line'>        return mBase.getAssets();
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    @Override
</span><span class='line'>    public Resources getResources()
</span><span class='line'>    {
</span><span class='line'>        return mBase.getResources();
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    @Override
</span><span class='line'>    public PackageManager getPackageManager() {
</span><span class='line'>        return mBase.getPackageManager();
</span><span class='line'>    }
</span><span class='line'>    ...
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h5>IsolatedContext</h5>

<p>這個Context把跟設備相關的method改掉掉，讓context不與設備直接溝通，但又提供足夠的功能以測試可以進行。
被IsolatedContext改寫掉的methods如下</p>

<p>(圖丟了 XD)</p>

<h5>RenamingDelegatingContext</h5>

<p>正常來說，如果production code裡用到的db 叫
foo.db跟一個檔案叫bar.txt，但測試時，希望不要去動到原來的foo.db,bar.txt
，而是提供一組測試用的foo.db跟bar.txt那就可以用RenamingDelegatingContext處理，可以把測試的命名成
test_foo.db跟test_bar.txt，然後跟RenamingDelegatingContext測試用的contxt是以”test_”當prefix即可，這樣所有測試用的
的檔案名稱跟DB名稱就是原來的名稱加上”test_”，用以避免prodcution
code跟testing code互相感染。</p>

<p>RenamingDelegatingContext是用來處理檔案都是放在application
project中的情況，但實際使用上，在測試專案上的相同的位置放上一個同檔名的檔案，會比用RenamingDelegatingContext適合，
不過，如果取得測試案專案的resource，就得繼承自InstrumentationTestCase而非AndroidTestCase體系</p>

<h5>MockContext</h5>

<p>Mock版的Context，裡面的implement就是丟出UnsupportedOperationException，所以如果要用這個context，那
測試中有用到的method，就要自行改寫，不然就等著接UnsupportedOperationException。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/**
</span><span class='line'> * A mock {@link android.content.Context} class.  All methods are non-functional and throw 
</span><span class='line'> * {@link java.lang.UnsupportedOperationException}.  You can use this to inject other dependencies,
</span><span class='line'> * mocks, or monitors into the classes you are testing.
</span><span class='line'> */
</span><span class='line'>public class MockContext extends Context {
</span><span class='line'> 
</span><span class='line'>    @Override
</span><span class='line'>    public AssetManager getAssets() {
</span><span class='line'>        throw new UnsupportedOperationException();
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    @Override
</span><span class='line'>    public Resources getResources() {
</span><span class='line'>        throw new UnsupportedOperationException();
</span><span class='line'>    }
</span><span class='line'> 
</span><span class='line'>    @Override
</span><span class='line'>    public PackageManager getPackageManager() {
</span><span class='line'>        throw new UnsupportedOperationException();
</span><span class='line'>    }
</span><span class='line'>    ...
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3>Assertion classes</h3>

<p>除了基本的Junit Assertions外，Android Test Framework還提供了</p>

<ol>
<li><a href="http://developer.android.com/reference/android/test/MoreAsserts.html" title="http://developer.android.com/reference/android/test/MoreAsserts.html">More
Asserts</a>

<ul>
<li>一些android testing
assertions的延伸，不過我覺得<a href="http://wiki.kent-chiu.com/doku.php?id=java:hamcrest_101" title="java:hamcrest_101">hamcrest</a>更好用</li>
</ul>
</li>
<li><a href="http://developer.android.com/reference/android/test/ViewAsserts.html" title="http://developer.android.com/reference/android/test/ViewAsserts.html">View
Asserts</a>

<ul>
<li>一些跟view有關的assertions，像是view跟view之間的關係、對齊方式、…</li>
</ul>
</li>
</ol>


<p>目前Android Test Framework(Android
2.3)還都是基於Junit3,Junit3的assertions在使用上沒有Junit4的來方便(powered
by Hamcrest)，Junit3沒有內建<code>assertThat()</code>，
Hamcrest的assertions是一個獨立的lib，所以，還是可以拿來跟Junit3搭著用，但是，Hamrcest的jar檔(1.3-R.C2)丟到Eclipse
ADT時，無法順利通過編譯，<a href="http://wiki.kent-chiu.com/doku.php?id=java:hamcrest_101#hamcrest_android" title="java:hamcrest_101">這裡有提供解決的方式</a>
，至於Hamcrest的assertion，可以參閱<a href="http://code.google.com/p/hamcrest/wiki/Tutorial" title="http://code.google.com/p/hamcrest/wiki/Tutorial">Hamcrest網站的教學</a>或<a href="http://wiki.kent-chiu.com/doku.php?id=java:hamcrest_101" title="java:hamcrest_101">這裡</a>也有一個簡單的說明。</p>

<h4>MISC</h4>

<ol>
<li>RenamingDelegating - Product
code用的是一個名字，測試時用的是另一個名字(檔案或資料庫)，用來避開testing
code改到product code的內容</li>
<li>ActivityMonitor -
android.app.Instrumentation.ActivityMonitor是Instrumentation的內部類別，可以用來monitor系統的行為。</li>
</ol>


<p>如果test proejct跟production project有用到相同的jars，只需由production
project export出jars讓testing project使用即可，如果testing
project有跟production project相同的lib，可能compile time會出錯</p>

<h1>Resources</h1>

<ul>
<li><a href="http://developer.android.com/resources/tutorials/testing/helloandroid_test.html" title="http://developer.android.com/resources/tutorials/testing/helloandroid_test.html">Hello World
Test</a></li>
<li><a href="http://developer.android.com/guide/topics/testing/testing_android.html" title="http://developer.android.com/guide/topics/testing/testing_android.html">Testing and
Instrumentation</a></li>
<li><a href="http://developer.android.com/guide/developing/testing/testing_eclipse.html" title="http://developer.android.com/guide/developing/testing/testing_eclipse.html">Testing In Eclipse, with
ADT</a></li>
<li><a href="http://codinghard.wordpress.com/2009/06/04/a-first-look-at-the-android-testing-framework/" title="http://codinghard.wordpress.com/2009/06/04/a-first-look-at-the-android-testing-framework/">http://codinghard.wordpress.com/2009/06/04/a-first-look-at-the-android-testing-framework/</a></li>
<li><a href="http://code.google.com/p/nativedriver/" title="http://code.google.com/p/nativedriver/">Native
Driver</a>

<ul>
<li>google官方的ui test
api，webdriver(<a href="http://code.google.com/p/selenium/" title="http://code.google.com/p/selenium/">selenium</a>)
like的測試工具</li>
</ul>
</li>
<li><p>RenamingDelegatingContext的使用方式可以參考下面的資料</p>

<ol>
<li><a href="http://blog.jayway.com/2011/10/10/using-renamingdelegatingcontext-to-mock-contentresolver-in-android/" title="http://blog.jayway.com/2011/10/10/using-renamingdelegatingcontext-to-mock-contentresolver-in-android/">http://blog.jayway.com/2011/10/10/using-renamingdelegatingcontext-to-mock-contentresolver-in-android/</a></li>
<li><a href="https://docs.google.com/View?id=ddwc44gs_21737cgtvfj" title="https://docs.google.com/View?id=ddwc44gs_21737cgtvfj">https://docs.google.com/View?id=ddwc44gs_21737cgtvfj</a></li>
</ol>
</li>
<li><p><a href="http://www.slideshare.net/dtmilano/introduction-to-android-testing" title="http://www.slideshare.net/dtmilano/introduction-to-android-testing">http://www.slideshare.net/dtmilano/introduction-to-android-testing</a></p>

<ul>
<li>android testing的簡介投影片，有每個test case使用上的差異</li>
</ul>
</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Kent Chiu</span></span>

      








  


<time datetime="2012-04-13T00:00:00+08:00" pubdate data-updated="true">Apr 13<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/testing/'>testing</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://blog.kent-chiu.com/blog/2012/04/13/unit_testing_in_android/" data-via="" data-counturl="http://blog.kent-chiu.com/blog/2012/04/13/unit_testing_in_android/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/04/03/nio_101/" title="Previous Post: JAVA NIO 101">&laquo; JAVA NIO 101</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/04/17/drawable_101/" title="Next Post: Android Drawable 101">Android Drawable 101 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/ide/'>IDE (1)</a></li>
<li class='category'><a href='/blog/categories/idea/'>IDEA (1)</a></li>
<li class='category'><a href='/blog/categories/actionbar/'>actionbar (1)</a></li>
<li class='category'><a href='/blog/categories/android/'>android (26)</a></li>
<li class='category'><a href='/blog/categories/apache/'>apache (7)</a></li>
<li class='category'><a href='/blog/categories/bash/'>bash (1)</a></li>
<li class='category'><a href='/blog/categories/book/'>book (1)</a></li>
<li class='category'><a href='/blog/categories/broadcast-receiver/'>broadcast_receiver (2)</a></li>
<li class='category'><a href='/blog/categories/cdi/'>cdi (2)</a></li>
<li class='category'><a href='/blog/categories/centos/'>centos (5)</a></li>
<li class='category'><a href='/blog/categories/clean-code/'>clean code (1)</a></li>
<li class='category'><a href='/blog/categories/command/'>command (2)</a></li>
<li class='category'><a href='/blog/categories/database/'>database (6)</a></li>
<li class='category'><a href='/blog/categories/di/'>di (2)</a></li>
<li class='category'><a href='/blog/categories/drawable/'>drawable (1)</a></li>
<li class='category'><a href='/blog/categories/ec/'>ec (1)</a></li>
<li class='category'><a href='/blog/categories/ecshop/'>ecshop (7)</a></li>
<li class='category'><a href='/blog/categories/english/'>english (14)</a></li>
<li class='category'><a href='/blog/categories/excel/'>excel (2)</a></li>
<li class='category'><a href='/blog/categories/extjs/'>extjs (2)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (4)</a></li>
<li class='category'><a href='/blog/categories/git-flow/'>git-flow (1)</a></li>
<li class='category'><a href='/blog/categories/guava/'>guava (2)</a></li>
<li class='category'><a href='/blog/categories/guice/'>guice (1)</a></li>
<li class='category'><a href='/blog/categories/hamcrest/'>hamcrest (1)</a></li>
<li class='category'><a href='/blog/categories/injection/'>injection (1)</a></li>
<li class='category'><a href='/blog/categories/ireport/'>ireport (2)</a></li>
<li class='category'><a href='/blog/categories/jasterreport/'>jasterreport (2)</a></li>
<li class='category'><a href='/blog/categories/java/'>java (21)</a></li>
<li class='category'><a href='/blog/categories/java-ee/'>java_ee (5)</a></li>
<li class='category'><a href='/blog/categories/jms/'>jms (1)</a></li>
<li class='category'><a href='/blog/categories/jpa/'>jpa (1)</a></li>
<li class='category'><a href='/blog/categories/jquery/'>jquery (1)</a></li>
<li class='category'><a href='/blog/categories/jsp/'>jsp (2)</a></li>
<li class='category'><a href='/blog/categories/junit/'>junit (1)</a></li>
<li class='category'><a href='/blog/categories/jvm/'>jvm (2)</a></li>
<li class='category'><a href='/blog/categories/kohana/'>kohana (1)</a></li>
<li class='category'><a href='/blog/categories/layout/'>layout (1)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (11)</a></li>
<li class='category'><a href='/blog/categories/logger/'>logger (1)</a></li>
<li class='category'><a href='/blog/categories/mac/'>mac (2)</a></li>
<li class='category'><a href='/blog/categories/mat/'>mat (1)</a></li>
<li class='category'><a href='/blog/categories/maven/'>maven (5)</a></li>
<li class='category'><a href='/blog/categories/memory/'>memory (1)</a></li>
<li class='category'><a href='/blog/categories/mindmap/'>mindmap (2)</a></li>
<li class='category'><a href='/blog/categories/misc/'>misc (1)</a></li>
<li class='category'><a href='/blog/categories/mysql/'>mysql (7)</a></li>
<li class='category'><a href='/blog/categories/nio/'>nio (1)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (1)</a></li>
<li class='category'><a href='/blog/categories/oracle/'>oracle (1)</a></li>
<li class='category'><a href='/blog/categories/osgi/'>osgi (3)</a></li>
<li class='category'><a href='/blog/categories/pdf/'>pdf (2)</a></li>
<li class='category'><a href='/blog/categories/pdt/'>pdt (5)</a></li>
<li class='category'><a href='/blog/categories/pear/'>pear (2)</a></li>
<li class='category'><a href='/blog/categories/performace/'>performace (1)</a></li>
<li class='category'><a href='/blog/categories/php/'>php (6)</a></li>
<li class='category'><a href='/blog/categories/play-framework/'>play_framework (1)</a></li>
<li class='category'><a href='/blog/categories/pm/'>pm (5)</a></li>
<li class='category'><a href='/blog/categories/postgresql/'>postgresql (2)</a></li>
<li class='category'><a href='/blog/categories/profile/'>profile (1)</a></li>
<li class='category'><a href='/blog/categories/programming/'>programming (12)</a></li>
<li class='category'><a href='/blog/categories/refactory/'>refactory (1)</a></li>
<li class='category'><a href='/blog/categories/roboguice/'>roboguice (1)</a></li>
<li class='category'><a href='/blog/categories/sbt/'>sbt (1)</a></li>
<li class='category'><a href='/blog/categories/scala/'>scala (4)</a></li>
<li class='category'><a href='/blog/categories/security/'>security (1)</a></li>
<li class='category'><a href='/blog/categories/service/'>service (2)</a></li>
<li class='category'><a href='/blog/categories/shiro/'>shiro (1)</a></li>
<li class='category'><a href='/blog/categories/smarty/'>smarty (3)</a></li>
<li class='category'><a href='/blog/categories/spring-rest/'>spring rest (1)</a></li>
<li class='category'><a href='/blog/categories/sql/'>sql (1)</a></li>
<li class='category'><a href='/blog/categories/style/'>style (1)</a></li>
<li class='category'><a href='/blog/categories/tdd/'>tdd (1)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (10)</a></li>
<li class='category'><a href='/blog/categories/theme/'>theme (1)</a></li>
<li class='category'><a href='/blog/categories/tips/'>tips (2)</a></li>
<li class='category'><a href='/blog/categories/ubuntu/'>ubuntu (8)</a></li>
<li class='category'><a href='/blog/categories/ui/'>ui (2)</a></li>
<li class='category'><a href='/blog/categories/vim/'>vim (2)</a></li>
<li class='category'><a href='/blog/categories/web/'>web (2)</a></li>
<li class='category'><a href='/blog/categories/windows/'>windows (1)</a></li>
<li class='category'><a href='/blog/categories/xampp/'>xampp (1)</a></li>
<li class='category'><a href='/blog/categories/xml/'>xml (2)</a></li>

  </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/15/mac-os-x-keyboard-shortcuts-for-terminal/">Mac OS X Keyboard Shortcuts for Terminal</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/17/my-intellij-idea-shortcut/">My IntelliJ IDEA Shortcut</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/12/jesper-report-font-issue/">Jesper Report, IReport 匯出成中文PDF</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/12/jasperreport-101/">JasperReport 101</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/06/mac-tips/">Mac Tips</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kent -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kentchiu';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.kent-chiu.com/blog/2012/04/13/unit_testing_in_android/';
        var disqus_url = 'http://blog.kent-chiu.com/blog/2012/04/13/unit_testing_in_android/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
