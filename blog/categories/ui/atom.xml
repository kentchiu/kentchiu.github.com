<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ui | Kent's Blog]]></title>
  <link href="http://blog.kent-chiu.com/blog/categories/ui/atom.xml" rel="self"/>
  <link href="http://blog.kent-chiu.com/"/>
  <updated>2014-06-27T09:37:56+08:00</updated>
  <id>http://blog.kent-chiu.com/</id>
  <author>
    <name><![CDATA[Kent]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Android Drawable 101]]></title>
    <link href="http://blog.kent-chiu.com/blog/2012/04/17/drawable_101/"/>
    <updated>2012-04-17T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2012/04/17/drawable_101</id>
    <content type="html"><![CDATA[<p>這篇文章裡的原始碼我放在GITHUB上 :
<a href="https://github.com/DraculaCwg/android_exercise" title="https://github.com/DraculaCwg/android_exercise">https://github.com/DraculaCwg/android_exercise</a></p>

<p>在android中，要設計出美觀的ui，通常都跟<code>Drawable</code>相關的物件脫離不了關係，<code>Drawable</code>翻成中文為”可繪的”，</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_001.png" alt="drawable_101_001.png" /></p>

<p>由上面的類別結構圖可以得知，圖檔、顏色、動畫、圖形，漸層這些都是屬於<code>Drawable</code>的子類別。
回過頭來看所有gui元件的祖先<code>View</code>
class，裡面跟<code>Drawable</code>有關的是setBackground開頭的幾個method，
也就是說，對於所有的元件，我們都可以透過圖片、形狀、顏色、…等<code>Drawable</code>的子類別來改變元件的外觀。</p>

<p>```</p>

<pre><code>public class View implements Drawable.Callback, KeyEvent.Callback, AccessibilityEventSource {
    public void setBackgroundColor(int color) {
        setBackgroundDrawable(new ColorDrawable(color));
    }
 
    public void setBackgroundColor(int color) {
       ...
    }
 
    @RemotableViewMethod
    public void setBackgroundResource(int resid) {
        if (resid != 0 &amp;&amp; resid == mBackgroundResource) {
            return;
        }
 
        Drawable d= null;
        if (resid != 0) {
            d = mResources.getDrawable(resid);
        }
        setBackgroundDrawable(d);
 
        mBackgroundResource = resid;
    }
 
    public void setBackgroundDrawable(Drawable d) {
        ...
    }
}
</code></pre>

<p>```</p>

<p>實務上比較常用的做法，是透過xml來設定元件的background，而官網文件上的<a href="http://developer.android.com/guide/topics/resources/drawable-resource.html" title="http://developer.android.com/guide/topics/resources/drawable-resource.html">Drawable
Resources</a>
裡面的xml tag都可以找到跟上面的類別相對應的tag，需要特別注意的是 .png,
.9.png,.jpg, or
.gif這些圖檔只要放在res\drawable的目錄下，就會自動依檔名變成可以直接在XML裡引用的Drawable
Resource，不需額外的tag
而另外常用的還有<code>Shape Drawable</code>這種resource，他裡面包含了處理顏色、形狀，外框的子tags</p>

<p>基本上，只要透過圖片跟Shape
Drawable，就可以玩出很多效果了，先從簡單的來好了:</p>

<h3>圖片</h3>

<p>要改變元件的外觀，最快的方式就是把元件加上背景圖片，下圖效果都是單純的把元件的背景圖片換掉而已</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_002.png" alt="drawable_101_002.png" /></p>

<p>上圖三個view，分別是用這三個圖片當底圖 (圖片來源 :
<a href="http://www.dibbus.com/2011/03/9patch-images-in-android/" title="http://www.dibbus.com/2011/03/9patch-images-in-android/">http://www.dibbus.com/2011/03/9patch-images-in-android/</a>)</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_003.png" alt="drawable_101_003.png" />
<img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_004.png" alt="drawable_101_004.png" />
<img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_005.png" alt="drawable_101_005.png" /></p>

<p>透過把android:background設定成圖片的resource就可以達到上面的效果</p>

<p>```
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"</p>

<pre><code>android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" &gt;
</code></pre>

<p> </p>

<pre><code>&lt;TextView
    android:id="@+id/bule"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:background="@drawable/btn_blue_matte"
    android:gravity="center"
    android:text="bule"
    android:textColor="@color/White" /&gt;
</code></pre>

<p> </p>

<pre><code>&lt;TextView
    android:id="@+id/bule_glossy"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:background="@drawable/btn_blue_glossy"
    android:gravity="center"
    android:text="bule glossy"
    android:textColor="@color/White" /&gt;
</code></pre>

<p> </p>

<pre><code>&lt;TextView
    android:id="@+id/corner"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:background="@drawable/btn_blue_pink_glossy"
    android:gravity="center"
    android:text="blue glossy with pink"
    android:textColor="@color/White" /&gt;
</code></pre>

<p> 
</LinearLayout>
```</p>

<h3>Shape Drawable</h3>

<p>除了用圖片，也可以用<code>Shape Drawable</code>的方式來改變元件的外觀，Shape
Drawable可以運用的tag如下</p>

<ol>
<li>&lt;corners> 圖形的四個角的形狀</li>
<li>&lt;gradient> 漸層</li>
<li>&lt;padding> 內部圖文</li>
<li>&lt;size></li>
<li>&lt;solid> 填滿的顏色</li>
<li>&lt;stroke> 外框的線條效果</li>
</ol>


<p>下面就是透過設定<code>Shape Drawable</code>的tag達到的效果</p>

<ol>
<li>第一個view是使用了數個子tag達到的</li>
<li>第二個view是只使用<code>&lt;gradient&gt;</code>做漸層</li>
<li>第三個view是只使用<code>&lt;corners&gt;</code>來設定圖形為圓角(round)</li>
<li>第四個view是只使用<code>&lt;solid&gt;</code>設定背景為綠色</li>
<li>第五個view是只使用<code>&lt;stroke&gt;</code>來設定外框的效果</li>
</ol>


<p><img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_006.png" alt="drawable_101_006.png" /></p>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" &gt;
 
    &lt;TextView
        android:id="@+id/all"
        android:layout_width="match_parent"
        android:layout_height="75dp"
        android:gravity="center"
        android:background="@drawable/shape_all"
        android:textColor="@color/Black"
        android:text="shape mix" /&gt;
 
    &lt;TextView
        android:id="@+id/gradient"
        android:layout_width="match_parent"
        android:layout_height="75dp"
        android:gravity="center"
        android:background="@drawable/shape_gradient"
        android:textColor="@color/Black"
        android:text="gradient" /&gt;
 
    &lt;TextView
        android:id="@+id/corner"
        android:layout_width="match_parent"
        android:layout_height="75dp"
        android:gravity="center"
        android:background="@drawable/shape_corners"
        android:textColor="@color/Black"
        android:text="corner" /&gt;
 
 
    &lt;TextView
        android:id="@+id/corner"
        android:layout_width="match_parent"
        android:layout_height="75dp"
        android:gravity="center"
        android:background="@drawable/shape_solid"
        android:textColor="@color/Black"
        android:text="corner" /&gt;
    &lt;TextView
        android:id="@+id/stroke"
        android:layout_width="match_parent"
        android:layout_height="75dp"
        android:gravity="center"
        android:background="@drawable/shape_stroke"
        android:textColor="@color/White"
        android:text="stroke" /&gt;
 
&lt;/LinearLayout&gt;
</code></pre>

<p>```</p>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" &gt;
    &lt;gradient
        android:centerColor="@color/WhiteSmoke"
        android:endColor="@color/Yellow"
        android:startColor="@color/Blue" /&gt;
    &lt;corners android:radius="50dp" /&gt;
    &lt;stroke
        android:dashGap="5dp"
        android:dashWidth="3dp"
        android:width="5dp"
        android:color="@color/DarkSalmon" /&gt;
&lt;/shape&gt;
</code></pre>

<p>```</p>

<h5>漸層</h5>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" &gt;
 
    &lt;gradient
        android:angle="90"
        android:centerColor="@color/WhiteSmoke"
        android:endColor="@color/Yellow"
        android:startColor="@color/Blue" /&gt;
 
&lt;/shape&gt;
</code></pre>

<p>```</p>

<h5>圓角</h5>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" &gt;
    &lt;corners android:radius="50dp"/&gt;
    &lt;solid android:color="@color/White"/&gt;
&lt;/shape&gt;
</code></pre>

<p>```</p>

<h5>背景色</h5>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" &gt;
 
    &lt;solid android:color="@color/Green" /&gt;
 
&lt;/shape&gt;
</code></pre>

<p>```</p>

<h5>外框</h5>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" &gt;
    &lt;stroke android:width="5dp"
        android:color="@color/Red"
        android:dashWidth="3dp"
        android:dashGap="5dp"
        /&gt;
&lt;/shape&gt;
</code></pre>

<p>```</p>

<h3>半透明效果</h3>

<p>像下圖的半透明效果(Smoked
Glass)，可以直接透過設定backgroud的顏色的透明度來達到，</p>

<p><img src="http://blog.kent-chiu.com/images/2012-04-17/drawable_101_007.png" alt="drawable_101_007.png" /></p>

<p>上圖的效果，主要就是在下面的這張圖上，放了一個半透明的text
view，要讓view半透明就是設定View的backgroud屬性，<code>android:background=”#77000000”</code>
#77000000是傳統的RGB前面加上一個透明度(alpha)，以傳統的RGB值#000000是全黑，#FFFFFF是全白，而前面的alpha的值也是00\~FF，這邊設成77剛好是一半。</p>

<p>[[android:drawable_101_008.png][]</p>

<p>```</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
 
&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frameLayout1"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:background="@drawable/google_doodle" &gt;
 
    &lt;TextView
        android:id="@android:id/text2"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:background="#77000000"
        android:gravity="center_vertical"
        android:text="smoked glass"
        android:textColor="#ffffffff"
        android:textSize="30dip" /&gt;
 
&lt;/FrameLayout&gt;
</code></pre>

<p>```</p>

<p>透明度的效果好不好，會跟後面的背景有關，有時，同一個透明度的值，在不同的背景下，效果就會差很多</p>

<h1>Resource</h1>

<ul>
<li><a href="http://www.dibbus.com/2011/03/9patch-images-in-android/" title="http://www.dibbus.com/2011/03/9patch-images-in-android/">http://www.dibbus.com/2011/03/9patch-images-in-android/</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Android Layout]]></title>
    <link href="http://blog.kent-chiu.com/blog/2012/03/20/layout/"/>
    <updated>2012-03-20T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2012/03/20/layout</id>
    <content type="html"><![CDATA[<ul>
<li>可以透xml(建議)或程式直接設定layout</li>
<li>太過複雜的Layout會影響操作效能跟操作性，應盡可能保持Layout愈簡單愈好</li>
</ul>


<p><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"&gt;
&lt;TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Enter Text Below"
/&gt;
&lt;EditText
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Text Goes Here!"
/&gt;
&lt;/LinearLayout&gt;
</code></p>

<p>上例中的fill_parent、wrap_content為<a href="#layout_parameter" title="android:layout ↵">Layout
Parameter</a>，每個Layout適用的<a href="#layout_parameter" title="android:layout ↵">Layout
Parameter</a>不盡相同，使用時需注意。</p>

<p>Layout
Parameters的使用需配合上一層的ViewGroup的layout決定，如上圖中，第一層的Layout是LinearLayout所以，第二層的三個Views(RelativeLayout,
View, View)都必需使用<code>LinearLayout</code>的<code>LayoutParamters</code>進行細部設定
，而第三層的三個View都是<code>RelativeLayout</code>的children，所以，都要用<code>RelativeLayout</code>的<code>LayoutParamters</code>進行細部設定。^<a href="#fn__1">1)</a>^</p>

<p>用程式設定Layout Parameters的方式如下:</p>

<p><code>
myView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
</code></p>

<h5>Layout Parameter</h5>

<p>Layout的設定，主要是透過<a href="http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html" title="http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html">Layout
Parameter</a>，不同的Layouts需套用不同的Layout
Parameters. Table Layout有Table Layout專屬的Layout Parameters、Liner
Layout有Liner Layout專屬的Layout Parameters</p>

<p>可以透過<a href="http://developer.android.com/guide/developing/tools/layoutopt.html" title="http://developer.android.com/guide/developing/tools/layoutopt.html">layoutopt</a>工具來對layout進行最佳化</p>

<p>@ : at the beginning of the string indicates that the XML parser should
parse and expand the rest of the ID string and identify it as an ID
resource.</p>

<ul>
<li>: means that this is a new resource name that must be created and
added to our resources (in the R.java file)</li>
</ul>


<h5>通用屬性</h5>

<ol>
<li>gravity 決定元件內容靠在什麼地方</li>
<li>layout_gravity 決定元件靠在父元件的什麼地方</li>
</ol>


<p>以一個TextView元件來說，<code>android:gravity=“center”</code>會讓TextView內容置中，而<code>android:gravity=“right”</code>會讓TextView在父元件中靠右</p>

<p><a href="http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/" title="http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/">這邊有gravity跟layout_gravity的說明</a></p>

<h4>Configuration Changes</h4>

<p>當瑩幕直立轉換成橫放或橫放轉換成直立時，會引發Configuration
Change，如果有特別指定直立或橫放專用的layout時，android會以專用的layout。
直立(portrait)或橫放(landscape)有專用的layout目錄，這三個目錄的檔案名稱可以重覆，它們只會產生一個共用的layout
id( R.layout.main_layout)。</p>

<p><code>
\res\layout\main_layout.xml
\res\layout-port\main_layout.xml
\res\layout-land\main_layout.xml
</code></p>

<p>或者更多的變化型式</p>

<p><code>
\res\layout\main_layout.xml
\res\layout-port\main_layout.xml
\res\layout-en\main_layout.xml
</code></p>

<p>上面的叫port,en,land叫<a href="http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources" title="http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources">configuration
qualifiers</a>，許多組合可以參閱<a href="http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources" title="http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources">官方文件</a></p>

<h2>RelativeLayout</h2>

<p>RelativeLayout字面上的意思是相對的layout，相關是指某一元件，與父元件或子元件的相對的關係。</p>

<h5>與父元件相對關係</h5>

<p>與父元件相對關係用boolean(true|false)值決定</p>

<ol>
<li>layout_alignParentTop 子元件的上緣是否對齊容器(父元件)的上緣</li>
<li>layout_alignParentBottom 子元件的下緣是否對齊容器(父元件)的下緣</li>
<li>layout_alignParentLeft 子元件的左邊緣是否對齊容器(父元件)的左邊緣</li>
<li>layout_alignParentRight 子元件的右邊緣是否對齊容器(父元件)的右邊緣</li>
<li>layout_centerHrizontal 子元件是否水平置中於容器(父元件)</li>
<li>layout_centerVertical 子元件是否垂值置中於容器(父元件)</li>
<li>layout_centerInparent 子元件是否完全置中(水平 + 垂值)於容器(父元件)</li>
<li>layout_alignWithParentIfMissing
如果相對的子元件不存在時，以父元件為參考</li>
</ol>


<h5>與容器(Container)內其他子元件相對關係</h5>

<p>因為是其它子元件相對應的關係，所以以下的屬性需要指定是要與那一個子元件關聯(父元件只有一個，所以上面的屬性只需要指定true或false)</p>

<ol>
<li>layout_above 在指定元件的上方</li>
<li>layout_below 在指定元件的下方</li>
<li>layout_toLeftOf 在指定元件的左方</li>
<li>layout_toRightOf 在指定元件的右方</li>
<li>layout_alignTop 元件上緣與指定元件的上緣對齊</li>
<li>layout_alignBottom 元件下緣與指定元件的下緣對齊</li>
<li>layout_alignLeft 元件左邊緣與指定元件的左邊緣對齊</li>
<li>layout_alignRight 元件右邊緣與指定元件的右邊緣對齊</li>
</ol>


<p>詳請可參閱<a href="http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html" title="http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html">RelativeLayout.LayoutParams
API</a></p>

<h5>用程式設定RelativeLayout的LayoutParams</h5>

<p><code>
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,   LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
params.addRule(RelativeLayout.ABOVE, R.id.dictionary);
</code></p>

<h1>進階的layout</h1>

<p>當layout過於複雜時，可以用以下三種方式解決</p>

<ol>
<li><a href="http://developer.android.com/resources/articles/layout-tricks-merge.html" title="http://developer.android.com/resources/articles/layout-tricks-merge.html">&lt;include></a>
tag</li>
<li><a href="http://developer.android.com/resources/articles/layout-tricks-stubs.html" title="http://developer.android.com/resources/articles/layout-tricks-stubs.html">&lt;ViewStub></a>
tag</li>
<li><a href="http://developer.android.com/guide/topics/ui/custom-components.html" title="http://developer.android.com/guide/topics/ui/custom-components.html">Custom
Components</a></li>
</ol>


<h1>Resources</h1>

<ul>
<li><a href="http://developer.android.com/guide/topics/ui/layout-objects.html" title="http://developer.android.com/guide/topics/ui/layout-objects.html">Layout Objects in Android
Dev</a></li>
</ul>


<p>^<a href="#fnt__1">1)</a>^ 這個跟java swing一樣，如果有寫過java
swing，應該很熟悉這種使用方式</p>
]]></content>
  </entry>
  
</feed>
