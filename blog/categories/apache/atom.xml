<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: apache | Kent's Blog]]></title>
  <link href="http://blog.kent-chiu.com/blog/categories/apache/atom.xml" rel="self"/>
  <link href="http://blog.kent-chiu.com/"/>
  <updated>2014-06-27T09:37:56+08:00</updated>
  <id>http://blog.kent-chiu.com/</id>
  <author>
    <name><![CDATA[Kent]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[在Windows上安裝Git Server]]></title>
    <link href="http://blog.kent-chiu.com/blog/2012/01/05/install_git_server_on_windows/"/>
    <updated>2012-01-05T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2012/01/05/install_git_server_on_windows</id>
    <content type="html"><![CDATA[<p>在Windows安裝git，讓每個經密碼認証後的user可以透過http pull跟push資料.</p>

<p>安裝環境如下:</p>

<ol>
<li>OS : WinXP</li>
<li>Web Server: Apache (xampp-win32-1.7.7-VC9)</li>
<li>Git Client: msysgit(Git-1.7.8-preview20111229-unicode.exe)</li>
</ol>


<p>xampp解壓到c:\xampp</p>

<p>git安裝到C:\Program Files\Git</p>

<p><code>
copy C:\Program Files\Git\libiconv-2.dll C:\Program Files\Git\libexec\git-core
copy C:\Program Files\Git\libiconv2.dll C:\Program Files\Git\libexec\git-core
</code></p>

<p><code>
git init --bare TestProject
</code></p>

<p>這下面這段加到最後面</p>

<p>```
Alias /git "c:/GitRepos"
<Directory "c:/GitRepos"></p>

<pre><code>Options Indexes FollowSymLinks MultiViews
AllowOverride None
Order Allow,Deny
Allow from all
</code></pre>

<p></Directory>
 </p>

<h1>Set this to the root folder containing your Git repositories.</h1>

<p>SetEnv GIT_PROJECT_ROOT C:/GitRepos
 </p>

<h1>Set this to export all projects by default (by default,</h1>

<h1>git will only publish those repositories that contain a</h1>

<h1>file named “git-daemon-export-ok”</h1>

<p>SetEnv GIT_HTTP_EXPORT_ALL
 </p>

<h1>Route specific URLS matching this regular expression to the git http server.</h1>

<p>ScriptAliasMatch \
  "(?x)^/git/(.*/(HEAD | \</p>

<pre><code>info/refs | \
objects/(info/[^/]+ | \
  [0-9a-f]{2}/[0-9a-f]{38} | \
  pack/pack-[0-9a-f]{40}\.(pack|idx)) | \
git-(upload|receive)-pack))$" \
"C:/Program Files/git/libexec/git-core/git-http-backend.exe/$1"
</code></pre>

<p>```</p>

<p>restart apache</p>

<p>```</p>

<h1>LoadModule dav_module modules/mod_dav.so</h1>

<h1>LoadModule dav_fs_module modules/mod_dav_fs.so</h1>

<p> </p>

<h1>Distributed authoring and versioning (WebDAV)</h1>

<h1>Attention! WEB_DAV is a security risk without a new userspecific configuration for a secure authentifcation</h1>

<p>Include "conf/extra/httpd-dav.conf"
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LAMP install on CentOS5]]></title>
    <link href="http://blog.kent-chiu.com/blog/2011/10/17/lamp_install/"/>
    <updated>2011-10-17T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2011/10/17/lamp_install</id>
    <content type="html"><![CDATA[<h2>OS installation</h2>

<h3>VMWare</h3>

<ul>
<li>掛載iso檔</li>
<li>網路卡設成NAT</li>
<li>記憶體可調小一點300M應該就夠了</li>
<li>不用特別去裝VMTools</li>
</ul>


<h3>CentOS 5</h3>

<ul>
<li>安裝成text mode的server就可(不用gui)</li>
<li>照<a href="http://smartraining.cn/centos/server_installation" title="http://smartraining.cn/centos/server_installation">這篇</a>的方式去裝就好了</li>
<li>網路設定如以改用dhcp</li>
<li>Firewall disabled</li>
</ul>


<h4>新建一個一般usre</h4>

<p><code>
adduser username
passwd username
</code></p>

<h4>網路設定</h4>

<ul>
<li>裝完後，如果網路沒有active，可以到/etc/sysconfig/network-scripts/ifcfg-eth0
修改網路設定</li>
</ul>


<p>指定IP</p>

<p>```</p>

<pre><code>DEVICE=eth0                          #網路卡名稱
BOOTPROTO=static                     #BOOTP協定
BROADCAST=192.168.202.255            #廣播 IP Address
HWADDR=00:15:C5:E5:99:B1             #MAC Address
IPADDR=192.168.202.100               #IP Address
NETMASK=255.255.254.0                #Netmask (遮罩)
NETWORK=192.168.202.0                #網段
ONBOOT=yes                           #開機自動啟動 
</code></pre>

<p>```</p>

<p>DHCP</p>

<p>```</p>

<pre><code>DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes
</code></pre>

<p>```</p>

<p>設定完重新啟動網卡</p>

<p>```</p>

<h1>/etc/rc.d/init.d/network restart</h1>

<p>```</p>

<h4>安裝packages</h4>

<ul>
<li>記得透過<a href="http://smartraining.cn/centos/yum" title="http://smartraining.cn/centos/yum">yum</a>裝以一下以下幾個packages，滿有用的</li>
</ul>


<p><code>
yum -y  install wget bzip2 unzip zip nmap tree lynx
</code></p>

<h2>Server installation</h2>

<p>預設的php是5.1.x的，有點太舊了，可以透過<a href="http://www.52crack.com/blog/?action=show&amp;id=368" title="http://www.52crack.com/blog/?action=show&amp;id=368">這個連結</a>的說明更新到5.2.x</p>

<h3>MySQL 5</h3>

<p>MySQL install</p>

<p><code>
yum -y install mysql-server
</code></p>

<p>set MySQL as daemon</p>

<p><code>
chkconfig mysqld on
</code></p>

<p>check config</p>

<p>```
chkconfig --list mysqld</p>

<h1>2 - 5 should be on</h1>

<p>mysqld 0:off 1:off 2:on 3:on 4:on 5:on 6:off
```</p>

<p>startup MySQL server</p>

<p><code>
/etc/rc.d/init.d/mysqld start
</code></p>

<p>change password</p>

<p><code>
mysqladmin -u root password 'Your Password'
</code></p>

<h3>Apache 2</h3>

<p>install Apache server</p>

<p><code>
yum -y install httpd
</code></p>

<h3>PHP 5</h3>

<p>install PHP</p>

<p><code>
yum -y install php php-mbstring php-mysql php-gd php-pear
</code></p>

<p>setup php.ini</p>

<p><code>
date.timezone = "Asia/Taipei"
</code></p>

<h3>Apache Config</h3>

<p>set Apache as daemon</p>

<p><code>
chkconfig httpd on
</code></p>

<p>check config</p>

<p>```
chkconfig --list httpd</p>

<h1>2 - 5 should be on</h1>

<p>httpd  0:off 1:off 2:on 3:on 4:on 5:on 6:off
```</p>

<p>startup httpd server</p>

<p><code>
/etc/rc.d/init.d/httpd start
</code></p>

<h2>verify installed</h2>

<p>create new php file in document root</p>

<p><code>
vi /var/www/html/index.php
</code></p>

<p>```</p>

<pre><code>&lt;?php 
phpinfo();
?&gt;
</code></pre>

<p>```</p>

<p>open by lynx borwser</p>

<p><code>
lynx http://localhost
</code></p>

<p>you should check
<a href="http://wiki.kent-chiu.com/doku.php?id=ubuntu:lamp" title="ubuntu:lamp">this</a>
article to config LAMP server</p>

<p>如果無法從linux外存取web，可能會firewall的關係，在command
line下執行<code>setup</code>可以關掉firewall</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PHP Web Server Instruction]]></title>
    <link href="http://blog.kent-chiu.com/blog/2011/10/17/install_web_server/"/>
    <updated>2011-10-17T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2011/10/17/install_web_server</id>
    <content type="html"><![CDATA[<h2>For Windows Platform</h2>

<h3>All in one package</h3>

<ul>
<li><p><a href="http://vertrigo.sourceforge.net/" title="http://vertrigo.sourceforge.net/">vertrigo</a></p>

<ol>
<li>apache server</li>
<li>PHP</li>
<li>MySQL</li>
<li>PHPmyAdmin</li>
<li>SQLite</li>
<li>SQLiteManager</li>
<li>zend optimizer</li>
<li>smarty</li>
</ol>
</li>
<li><p><a href="http://www.wampserver.com/" title="http://www.wampserver.com/">WAMP</a></p>

<ol>
<li>apache server</li>
<li>PHP</li>
<li>MySQL</li>
<li>PHPmyAdmin</li>
<li>SQLite</li>
<li>SQLiteManager</li>
<li>zend optimizer</li>
<li>smarty</li>
</ol>
</li>
</ul>


<h2>For Ubuntu(Linux) Platform</h2>

<p>apt-get will give you the whole world.!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[htaccess 101]]></title>
    <link href="http://blog.kent-chiu.com/blog/2011/10/17/htaceess_101/"/>
    <updated>2011-10-17T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2011/10/17/htaceess_101</id>
    <content type="html"><![CDATA[<p><code>.htaccess</code> is a configuration file of apache, it privoides way for us
to custome some behavious of apache.</p>

<p>.htaccess files provide a way to make configuration changes on a
per-directory basis.</p>

<p>if you need to create a whole new <code>.htaccess</code> file in windows, you need
save as <code>”.htaccess”</code> with quots</p>

<p>In general, you should never use .htaccess files unless you don't have
access to the main server configuration file.</p>

<h1>functions</h1>

<ol>
<li><a href="#custom_error_pages" title="apache:htaceess_101">Custom Error Pages</a></li>
<li><a href="#disabled_directory_listing" title="apache:htaceess_101">Disabled Directory
Listing</a></li>
<li><a href="#denyallow_certian_ip_addresses" title="apache:htaceess_101">Deny/Allow Certian IP
Addresses</a></li>
<li><a href="#redirection" title="apache:htaceess_101">Redirection</a></li>
<li><a href="#password_protection" title="apache:htaceess_101">Password Protection</a></li>
<li><a href="#mime_type_settings" title="apache:htaceess_101">MIME Type Settings</a></li>
<li><a href="#index_pages_settings" title="apache:htaceess_101">Index Pages
Settings</a></li>
<li><a href="#url_rewrite" title="apache:htaceess_101">URL Rewrite</a></li>
<li><a href="#default_pages" title="apache:htaceess_101">Default Pages</a></li>
</ol>


<h2>Custom Error Pages</h2>

<h4>Using Redirect Pages</h4>

<p>```</p>

<pre><code>ErrorDocument 400 404.html
ErrorDocument 401 401.html
ErrorDocument 402 402.html
</code></pre>

<p>```</p>

<h4>Using inline html</h4>

<p>```</p>

<pre><code>ErrorDocument 404 "&lt;html&gt;&lt;body&gt;找不到&lt;/body&gt;&lt;/html&gt;"
</code></pre>

<p>```</p>

<h4>Using URL</h4>

<p>```</p>

<pre><code>ErrorDocument 500 http://www.xxx.com/xxx
</code></pre>

<p>```</p>

<h2>Disabled Directory Listing</h2>

<h4>Deny all access to files (Recommended)</h4>

<p>```</p>

<pre><code>&lt;Files ~ "^.(htaccess|htpasswd)$"&gt;
deny from all
&lt;/Files&gt;
Options Indexes
order deny,allow
</code></pre>

<p>```</p>

<h4>Allow access to files (NOT Recommended)</h4>

<p>```</p>

<pre><code>&lt;Files ~ "^.(htaccess|htpasswd)$"&gt;
deny from all
&lt;/Files&gt;
Options -Indexes
order deny,allow
</code></pre>

<p>```</p>

<h4>Access restrictions</h4>

<p>```</p>

<pre><code>deny from all
allow from all
deny from  192.168.1.1
deny from  192.168.1.1
</code></pre>

<p>```</p>

<h2>Deny/Allow Certian IP Addresses</h2>

<h2>Redirection</h2>

<p>what's difference between <strong>Moved Permanently</strong> and <strong>Moved
Temporarily</strong></p>

<h4>301 Moved Permanently</h4>

<p>```</p>

<pre><code>Redirect permanent old1 new1
Redirect permanent /path/old2 /path/new2
Redirect permanent /path/old3.html /path/old3.php
</code></pre>

<p>```</p>

<h4>302 Moved Temporarily</h4>

<p>```</p>

<pre><code>Redirect temp old1 new1
Redirect temp /path/old2 /path/new2
Redirect temp /path/old3.html /path/old3.php
</code></pre>

<p>```</p>

<h2>Password Protection</h2>

<h3>Basic authentication</h3>

<ul>
<li>STEP 1 Create your .htpasswd</li>
<li>STEP 2 Point the path to the .htpasswd file</li>
</ul>


<p>```</p>

<pre><code>&lt;Files ~ "^.(htaccess|htpasswd)$"&gt;
deny from all
&lt;/Files&gt;
Options -Indexes
AuthUserFile /home/foo/bar/.htpasswd
AuthGroupFile /dev/null
AuthName "Please enter your ID and password"
AuthType Basic
require valid-user
order deny,allow
</code></pre>

<p>```</p>

<h2>MIME Type Settings</h2>

<p><code>
</code></p>

<h2>Index Pages Settings</h2>

<p><code>
DirectoryIndex index.html index.htm index.cgi
</code></p>

<h2>URL Rewrite</h2>

<h3>Setup WWW</h3>

<p>```</p>

<pre><code>RewriteEngine on
RewriteCond %{HTTP_HOST} ^(mydomain\.com)(:80)? [NC]
RewriteRule ^(.*) http://www.mydomain.com/$1 [R=301,L]
</code></pre>

<p>```</p>

<h1>Examples</h1>

<h2>Anti HotLinks (protecting others take your impages)</h2>

<p><code>
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http://www.domain.com/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http://www.domain.com$ [NC]
RewriteRule .*\.(*)$ /content/no_hotlink.png [R,NC]
</code></p>

<p><code>RewriteRule .*\.(*)$ /content/no_hotlink.png [R,NC]</code> this means if
somebody try to hot linking you resource, he will redirect to
<code>/content/no_hotlink.png</code></p>

<h2>Default Pages</h2>

<p>```</p>

<pre><code>DirectoryIndex index.php mypage.html
</code></pre>

<p>```</p>

<h1>Resources</h1>

<ul>
<li><a href="http://www.htaccesseditor.com/tc.shtml" title="http://www.htaccesseditor.com/tc.shtml">htaccess
editor</a>

<ul>
<li>a web program to help writing htaccess file.</li>
</ul>
</li>
<li><a href="http://httpd.apache.org/docs/2.2/rewrite/" title="http://httpd.apache.org/docs/2.2/rewrite/">apache rewrite
mod</a></li>
<li><a href="http://www.widexl.com/tutorials/mod_rewrite.html" title="http://www.widexl.com/tutorials/mod_rewrite.html">http://www.widexl.com/tutorials/mod_rewrite.html</a>

<ul>
<li>Module Rewrite - URL Rewriting Guide</li>
</ul>
</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[在htdoc目錄外新增網站]]></title>
    <link href="http://blog.kent-chiu.com/blog/2011/10/17/how_to_add_new_web_site_outside_htdoc/"/>
    <updated>2011-10-17T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2011/10/17/how_to_add_new_web_site_outside_htdoc</id>
    <content type="html"><![CDATA[<p>```</p>

<pre><code>    Alias /dokuwiki "D:/docs/wiki/dokuwiki"
    &lt;Directory "D:/docs/wiki/dokuwiki"&gt;
        AllowOverride None
        Order Deny,Allow 
    &lt;/Directory&gt;
</code></pre>

<p>```</p>

<p>如果是這樣，可能會有問題</p>

<p><code>
AllowOverride None
Order Deny,Allow
Deny from all
</code></p>
]]></content>
  </entry>
  
</feed>
