<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: i18n | Kent's Blog]]></title>
  <link href="http://blog.kent-chiu.com/blog/categories/i18n/atom.xml" rel="self"/>
  <link href="http://blog.kent-chiu.com/"/>
  <updated>2013-08-31T01:36:04+08:00</updated>
  <id>http://blog.kent-chiu.com/</id>
  <author>
    <name><![CDATA[Kent]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Internationalization (a.k.a i18n)]]></title>
    <link href="http://blog.kent-chiu.com/blog/2012/03/20/i18n_101/"/>
    <updated>2012-03-20T00:00:00+08:00</updated>
    <id>http://blog.kent-chiu.com/blog/2012/03/20/i18n_101</id>
    <content type="html"><![CDATA[<p>&lt;note note>JDK7對Locale的處理有些變化，請參閱JDK7的說明&lt;note></p>

<h5>需要被多國語系的內容有</h5>

<ol>
<li>數字</li>
<li>貨幣金額</li>
<li>日期</li>
<li>時間</li>
<li>文字</li>
</ol>


<h5>檔名格式</h5>

<ul>
<li>MessagesBundle_en_US.properties</li>
<li>MessagesBundle_fr_FR.properties</li>
<li>MessagesBundle_de_DE.properties</li>
<li>MessagesBundle_zh_TW.properties</li>
<li>MessagesBundle_zh_CN.properties</li>
</ul>


<p>MessagesBundle可換成適合的檔名.Language(小寫)跟Country(大寫)用底線(“_”)分隔。</p>

<h5>取得有效的語系</h5>

<p><code>
DateFormat.getAvailableLocales();
 
// result
ar_EG
be_BY
bg_BG
ca_ES
cs_CZ
da_DK
de_DE
.
.
.
</code></p>

<p><code>
Locale.getDisplayName
 
// result
Arabic (Egypt)
Belarussian (Belarus)
Bulgarian (Bulgaria)
Catalan (Spain)
Czech (Czech Republic)
Danish (Denmark)
German (Germany)
</code></p>

<h5>ResourceBundle尋找順序</h5>

<p>指定語系是fr，國家是CA，而且是在LINUX作業系統，系統會依下列順序尋找ResourceBundle</p>

<ol>
<li>ButtonLabel_fr_CA_UNIX</li>
<li>ButtonLabel_fr_CA</li>
<li>ButtonLabel_fr</li>
<li>ButtonLabel_en_US</li>
<li>ButtonLabel_en</li>
<li>ButtonLabel</li>
</ol>


<h5>客制ResourceBundle載入邏輯</h5>

<p>透過<code>java.util.ResourceBundle.Control</code>可以自訂ResourceBundle載入的邏輯</p>

<p>```
ResourceBundle rb = ResourceBundle.getBundle("RBControl", locale,</p>

<pre><code>     new ResourceBundle.Control() {
     @Override
     public List&lt;Locale&gt; getCandidateLocales(String baseName, Locale locale) {
         if (baseName == null)
         throw new NullPointerException();
         if (locale.equals(new Locale("zh", "HK"))) {
         return Arrays.asList(
             locale,
             Locale.TAIWAN,
             // no Locale.CHINESE here
             Locale.ROOT);
         } else if (locale.equals(Locale.TAIWAN)) {
         return Arrays.asList(
             locale,
             // no Locale.CHINESE here
             Locale.ROOT);
         }
         return super.getCandidateLocales(baseName, locale);
     }
     });
</code></pre>

<p>```</p>

<h5>Messages</h5>

<p>如果是字串裡包含著會變數(會變動的內容 ex: “hi username, how are you
today?”這是一整段字串，但其中的username會需被置換成使用者的姓名)，需多做額外的處理。</p>

<h1>格式化</h1>

<ul>
<li><p>數字(含金額跟貨幣符號 €，￥以及%等符號)</p>

<ol>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/NumberFormat.html" title="http://download.java.net/jdk7/docs/api/java/text/NumberFormat.html">NumberFormat</a></li>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/DecimalFormat.html" title="http://download.java.net/jdk7/docs/api/java/text/DecimalFormat.html">DecimalFormat</a></li>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/DecimalFormatSymbols.html" title="http://download.java.net/jdk7/docs/api/java/text/DecimalFormatSymbols.html">DecimalFormatSymbols</a></li>
</ol>
</li>
<li><p>日期</p>

<ol>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/DateFormat.html" title="http://download.java.net/jdk7/docs/api/java/text/DateFormat.html">DateFormat</a></li>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/SimpleDateFormat.html" title="http://download.java.net/jdk7/docs/api/java/text/SimpleDateFormat.html">SimpleDateFormat</a></li>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/DateFormatSymbols.html" title="http://download.java.net/jdk7/docs/api/java/text/DateFormatSymbols.html">DateFormatSymbols</a>

<ul>
<li>封裝了日期時間相關的符號，像Mon,PM/AM,…</li>
</ul>
</li>
</ol>
</li>
<li><p>一般文字</p>

<ol>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/MessageFormat.html" title="http://download.java.net/jdk7/docs/api/java/text/MessageFormat.html">MessageFormat</a></li>
<li><a href="http://download.java.net/jdk7/docs/api/java/text/ChoiceFormat.html" title="http://download.java.net/jdk7/docs/api/java/text/ChoiceFormat.html">ChoiceFormat</a></li>
</ol>
</li>
</ul>


<p>字串裏面包含多種形態的變數，顯示日期，時間，貨幣等，可用<strong>Message
Pattern</strong>的方式來處理</p>

<p><img src="http://blog.kent-chiu.com/images/2012-03-20/i18n_101_001.gif" alt="i18n_101_001.gif" /></p>

<p>ex:</p>

<p>```
"Hi {0}!, today is {1,date,short}"  {0}會代入"Kent", {1}代入new Date()後會的到像這樣的輸出</p>

<p>Hi, Kent! Today is 2010/12/7
```</p>

<p>利用這種方式，可以把格式化的行為延遲到RUNTIME.</p>

<h5>單/複數問題</h5>

<p>有些語言，像是拉丁英系，名詞會有單複數之分(ex: 英文 a apple,two
apple<strong>s</strong>),處理這類的問題時，或許可以參考一下<a href="http://download.oracle.com/javase/tutorial/i18n/format/choiceFormat.html" title="http://download.oracle.com/javase/tutorial/i18n/format/choiceFormat.html">這裡</a></p>

<h1>Resources</h1>

<ul>
<li><del>Sun</del> <a href="http://download.oracle.com/javase/tutorial/i18n/TOC.html" title="http://download.oracle.com/javase/tutorial/i18n/TOC.html">Oracle i18n
Tutorial</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
