<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>Google Guava - Collection 101</title>
  <meta name="description" content="Table of contents">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://blog.kent-chiu.com//guava/java/2012/03/20/google_guava_-_collection_101.html">
  <link rel="alternate" type="application/atom+xml" title="Kent's Blog" href="http://blog.kent-chiu.com//feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Kent's Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Google Guava - Collection 101</h1>
    <p class="post-meta">Mar 20, 2012 • Kent Chiu</p>
  </header>

  <article class="post-content">
    <h1 class="no_toc" id="table-of-contents">Table of contents</h1>

<ul id="markdown-toc">
  <li><a href="#iterable--iterators">Iterable &amp; Iterators</a>    <ul>
      <li><a href="#iterable-vs-iterator">Iterable v.s Iterator</a></li>
      <li><a href="#iterable-array-">Iterable Array ?</a></li>
    </ul>
  </li>
  <li><a href="#function--predicate">Function &amp; Predicate</a>    <ul>
      <li><a href="#predicaten">Predicaten</a></li>
      <li><a href="#function">Function</a></li>
    </ul>
  </li>
  <li><a href="#collection">Collection</a>    <ul>
      <li><a href="#immutablexxx">ImmutableXXX</a></li>
      <li><a href="#find-in-collection">Find in collection</a></li>
      <li><a href="#iterators--iterables">Iterators &amp; Iterables</a>        <ul>
          <li><a href="#section">搜尋、過濾與定址取值</a></li>
          <li><a href="#section-1">相加</a></li>
          <li><a href="#section-2">條件測試</a></li>
          <li><a href="#section-3">移除</a></li>
          <li><a href="#section-4">其它</a></li>
          <li><a href="#section-5">轉換</a></li>
        </ul>
      </li>
      <li><a href="#transform">transform</a></li>
      <li><a href="#filter">Filter</a></li>
      <li><a href="#ording">Ording</a></li>
      <li><a href="#comparatorordering">ComparatorOrdering</a></li>
      <li><a href="#predicate">Predicate</a></li>
      <li><a href="#combining-and-modifying-comparators">Combining and Modifying Comparators</a></li>
      <li><a href="#constraints">Constraints</a></li>
      <li><a href="#forwardingobject">ForwardingObject</a></li>
    </ul>
  </li>
  <li><a href="#resources">Resources</a></li>
</ul>

<hr />

<p>Guava是google的一個開源項目，目的在提供常用工具類的API，字串處理，caching，primitives型別處理，I/O，併行(concurrnecy)處理，<br />
還有超級好用的Collections處理。</p>

<p>本篇主要著重於Collection相關的使用介紹，有<a href="http://wiki.kent-chiu.com/doku.php?id=java:google_guava_101" title="java:google_guava_101">另外一篇</a>專門在介紹Collection之外其它的功能的用法。</p>

<h1 id="iterable--iterators">Iterable &amp; Iterators</h1>

<p>如果之前method的return值習慣用Collection, List, Set, Map,<br />
建議可以改傳回Iteratable&lt;T&gt;</p>

<pre><code>  // 原本是傳回集合
  public List&lt;String&gt; getData(){...};
  // 可以改成傳回Iterable (RECOMMAND)
  public Iterable&lt;String&gt; getData(){...};
  // 或改成傳回Iterator
  public Iterator&lt;String&gt; getData(){...};

</code></pre>

<p>雖然<strong>大部份的API都是傳回Iterator(since JDK1.4)</strong>, 在Hamcrest<br />
lib中只有提供Iterable(since JDK1.5) base的lib，沒有Iterator base的<br />
<code>IsIterableWithSize&lt;E&gt; extends FeatureMatcher&lt;Iterable&lt;E&gt;, Integer&gt;</code><br />
用Iterable應該會相對方便些，而且Iterable可以取出Iterator，而Iterator沒有辦法直接取得Iterable，而且實作Iterable可以直接餵給foreach</p>

<pre><code>assertThat(data, Matchers.&lt;MyClass&gt;iterableWithSize(1));

</code></pre>

<h4 id="iterable-vs-iterator">Iterable v.s Iterator</h4>

<p>是java<br />
1.5引入，跟foreach搭配使用的<code>java.lang.Iterable&lt;T&gt;</code>，<code>java.util.Iterator&lt;E&gt;</code>則是java<br />
1.2引入後，1.5加入泛型的能力。</p>

<p>Iterable是指含有Iterator的物件，而Iterator則是指向集合裡單一的instance。</p>

<p>如果對一個集合取兩次的Iterator，兩次的Iterator是各自獨立的。</p>

<pre><code>    package java.util;
     
    /**
     * @since 1.2
     */
    public interface Iterator&lt;E&gt; {
        boolean hasNext();
     
        E next();
     
        void remove();
    }

</code></pre>

<pre><code>    /** Implementing this interface allows an object to be the target of
     *  the "foreach" statement.
     * @since 1.5
     */
    public interface Iterable&lt;T&gt; {
     
        Iterator&lt;T&gt; iterator();
    }

</code></pre>

<h4 id="iterable-array-">Iterable Array ?</h4>

<p>在java<br />
5+，有新的<a href="http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html" title="http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html">For-Each</a><br />
loop語法， 它可以用來iterate實作Iterable<br />
interface的類別。通常是用來iterate Collection(List, Set,<br />
Map,…)及array，但是<br />
如果試著把array丟到其他Iterable類型的參數，卻行不通，why?</p>

<pre><code>String myArray = new String[]{"foo", "bar", "baz"};
for(String each : myArray) { // this one works
 
}
 
doIterate(myArray); // this cause compiler level error
 
public doIterate(Iterable args) {
}

</code></pre>

<p>原因為array根本沒有實作Iterable，For-Each<br />
Loop對array的支援是compiler的syntax<br />
sugar，compiler會把for-each展開成一般的for-loop</p>

<p>如果需要讓Array讓成iterable，可以用Arrays.asList()</p>

<h1 id="function--predicate">Function &amp; Predicate</h1>

<p>Function跟Predicate是許多method的參數，像常用的應該是</p>

<h4 id="predicaten">Predicaten</h4>

<p>Predicaten常用於</p>

<ol>
  <li>過濾集合中<em>特定條件的元素</em><br />
<code>Collections2.filter(Collection&lt;E&gt;, Predicate&lt;? super E&gt;)</code></li>
  <li>搜尋集合中<em>特定條件的元素</em><br />
<code>find(Iterator&lt;T&gt;, Predicate&lt;? super T&gt;, T)</code></li>
  <li>定位集合中<em>特定條件的元素</em><br />
<code>indexOf(Iterator&lt;T&gt;, Predicate&lt;? super T&gt;)</code></li>
  <li>判斷集合中所有<em>特定條件的元素</em>都符合條件<br />
<code>Iterators.all(Iterator&lt;T&gt;, Predicate&lt;? super T&gt;)</code></li>
  <li>判斷集合中是否包含任何<em>特定條件的元素</em><br />
<code>any(Iterator&lt;T&gt;, Predicate&lt;? super T&gt;)</code></li>
  <li>…</li>
</ol>

<p>上述中的<strong>特定條件的元素</strong>就是用Predicate實作，Predicate是一個interface，宣告如下</p>

<pre><code>public interface Predicate&lt;T&gt; {
  /**
   * Returns the result of applying this predicate to {@code input}. This method is &lt;i&gt;generally
   * expected&lt;/i&gt;, but not absolutely required, to have the following properties:
   *
   * &lt;ul&gt;
   * &lt;li&gt;Its execution does not cause any observable side effects.
   * &lt;li&gt;The computation is &lt;i&gt;consistent with equals&lt;/i&gt;; that is, {@link Objects#equal
   *     Objects.equal}{@code (a, b)} implies that {@code predicate.apply(a) ==
   *     predicate.apply(b))}.
   * &lt;/ul&gt;
   *
   * @throws NullPointerException if {@code input} is null and this predicate does not accept null
   *     arguments
   */
  boolean apply(@Nullable T input);
 
  /**
   * Indicates whether another object is equal to this predicate.
   *
   * &lt;p&gt;Most implementations will have no reason to override the behavior of {@link Object#equals}.
   * However, an implementation may also choose to return {@code true} whenever {@code object} is a
   * {@link Predicate} that it considers &lt;i&gt;interchangeable&lt;/i&gt; with this one. "Interchangeable"
   * &lt;i&gt;typically&lt;/i&gt; means that {@code this.apply(t) == that.apply(t)} for all {@code t} of type
   * {@code T}). Note that a {@code false} result from this method does not imply that the
   * predicates are known &lt;i&gt;not&lt;/i&gt; to be interchangeable.
   */
  @Override
  boolean equals(@Nullable Object object);
}

</code></pre>

<p>一般來說，就是在apply()裡實作需求就可，apply會依序將集合中的元件透過input傳入，apply一次會處理一個元素(input)，判斷input符不符合<strong>特定條件的元素</strong>，然後return<br />
true或false</p>

<p>比如說，我們做一個判斷數值是否大於0的Predicate</p>

<pre><code>    class IsGreateThenZero implements Predicate&lt;Integer&gt; {
        @Override
        public boolean apply(Integer input) {
            return input &gt; 0;
        }
    }

</code></pre>

<p>這樣就可以用來</p>

<ol>
  <li>過濾集合中<em>大於0的的元素</em><br />
<code>Collections2.filter(myIntegerList, new IsGreateThenZero())</code></li>
  <li>搜尋集合中<em>大於0的的元素</em><br />
<code>find(myIntegerList,  new IsGreateThenZero())</code></li>
  <li>定位集合中<em>大於0的的元素</em><br />
<code>indexOf(myIntegerList, new IsGreateThenZero())</code></li>
  <li>判斷集合是否全部<em>大於0的</em><br />
<code>Iterators.all(myIntegerList, new IsGreateThenZero())</code></li>
  <li>判斷集合中是否包含任何<em>大於0的元素</em><br />
<code>any(myIntegerList, new IsGreateThenZero())</code></li>
  <li>….</li>
</ol>

<p>另外兩個Predicate間可以做邏輯運算，像AND, OR, NOT …</p>

<p>比如說，我們再寫一個判斷數值是否小於10的Predicate</p>

<pre><code>    class IsLessThenTen implements Predicate&lt;Integer&gt; {
        @Override
        public boolean apply(Integer input) {
            return input &lt; 10;
        }
    }

</code></pre>

<p>這樣，我們也可以用來AND, OR來做出 <code>&gt; 0 AND &lt; 10</code>，<code>&gt; 0 OR &lt; 10</code>的新條件</p>

<pre><code>IsGreateThenZeroAndLessThenTenPredicate = Predicates.and(new IsGreateThenZero(), new IsLessThenTen());

</code></pre>

<p><a href="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/base/Predicates.html" title="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/base/Predicates.html">Predicates</a>裡面還有不少做集合運算的Predicates可以使用。</p>

<h4 id="function">Function</h4>

<p>Function常用於transform(轉換)，把某個集合轉成另一個集合，比如說，把List&lt;Integer&gt;專成List&lt;String&gt;，或把List&lt;Integer&gt;轉成Set&lt;Integer&gt;，當然，實際上的用法會比這樣的例子複雜許多，<br />
不過，基本上想要把一種集合的元素，轉成”另一種”集合的<strong>另一種元素</strong>，就可以用<code>Iterables.transform(Iterable&lt;F&gt;, Function&lt;? super F, ? extends T&gt;)</code>達到</p>

<p>Function的用法上跟<a href="#predicate" title="java:google_guava_-_collection_101 ↵">Predicate</a>差不多，Function也是一個interface，內容如下</p>

<pre><code>public interface Function&lt;F, T&gt; {
  /**
   * Returns the result of applying this function to {@code input}. This method is &lt;i&gt;generally
   * expected&lt;/i&gt;, but not absolutely required, to have the following properties:
   *
   * &lt;ul&gt;
   * &lt;li&gt;Its execution does not cause any observable side effects.
   * &lt;li&gt;The computation is &lt;i&gt;consistent with equals&lt;/i&gt;; that is, {@link Objects#equal
   *     Objects.equal}{@code (a, b)} implies that {@code Objects.equal(function.apply(a),
   *     function.apply(b))}.
   * &lt;/ul&gt;
   *
   * @throws NullPointerException if {@code input} is null and this function does not accept null
   *     arguments
   */
  T apply(@Nullable F input);
 
  /**
   * Indicates whether another object is equal to this function.
   *
   * &lt;p&gt;Most implementations will have no reason to override the behavior of {@link Object#equals}.
   * However, an implementation may also choose to return {@code true} whenever {@code object} is a
   * {@link Function} that it considers &lt;i&gt;interchangeable&lt;/i&gt; with this one. "Interchangeable"
   * &lt;i&gt;typically&lt;/i&gt; means that {@code Objects.equal(this.apply(f), that.apply(f))} is true for all
   * {@code f} of type {@code F}. Note that a {@code false} result from this method does not imply
   * that the functions are known &lt;i&gt;not&lt;/i&gt; to be interchangeable.
   */
  @Override
  boolean equals(@Nullable Object object);
}

</code></pre>

<p>Function的template有兩個參數F, T，代表著From, To,<br />
跟Predicate一樣也是實作apply，不過，他的apply的return不是boolean，而是T(To)<br />
所以，主要的實作就是做input型別F跟return 型別T之間的mapping</p>

<h1 id="collection">Collection</h1>

<p><a href="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/package-summary.html" title="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/package-summary.html">Collection<br />
Javadoc</a></p>

<ul>
  <li>Using Multimaps relpace Map&lt;Foo, Collection&lt;Bar» :<br />
key是唯一值,如果put不同的內容到value,value會一直累加而不是取代</li>
  <li>MapMaker</li>
  <li>BiMap : 雙向的map,可以由key取出value,也可以由value取出key</li>
  <li>ForwardingObject : google<br />
collections大多宣告成final，無法改寫，而forwarding提供一個decorate的機制，<br />
可在既有的google collections上做延伸</li>
</ul>

<p>Google Collection裡很多class都不能直接用new產生，必須透過create()<br />
method來建立 ex: ” HashBiMap.create()”</p>

<p>The following codes is got from many places, you can check the<br />
<a href="#resources" title="java:google_guava_-_collection_101 ↵">Resources</a> section<br />
for source and details.</p>

<h3 id="immutablexxx">ImmutableXXX</h3>

<pre><code>ImmutableMap.&lt;String, Object&gt;builder().put("a", objectA)..put("b", objectB).build();

</code></pre>

<h3 id="find-in-collection">Find in collection</h3>

<pre><code>find = Iterators.find(myCollection.iterator(), predicate);
find2 = Iterables.find(myCollection, predicate);
// find1 == find2

</code></pre>

<h3 id="iterators--iterables">Iterators &amp; Iterables</h3>

<p><a href="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterators.html" title="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterators.html">Iterators</a>跟<a href="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html" title="http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html">Iterables</a><br />
的功能差不多，都是在Collection進行Iterator的相關動作，ex:</p>

<h5 id="section">搜尋、過濾與定址取值</h5>

<ol>
  <li>filter</li>
  <li>find</li>
  <li>get</li>
  <li>getFirst</li>
  <li>getLast</li>
  <li>getOnlyElement</li>
  <li>indexOf</li>
  <li>skip</li>
  <li>partition</li>
  <li>limit</li>
  <li>paddedPartition</li>
  <li>peekingIterator (不會造成Iterator.next())</li>
</ol>

<h5 id="section-1">相加</h5>

<ol>
  <li>addAll</li>
  <li>concat</li>
</ol>

<h5 id="section-2">條件測試</h5>

<ol>
  <li>all</li>
  <li>any</li>
  <li>contains</li>
  <li>elementsEqual</li>
  <li>contains</li>
  <li>isEmpty</li>
  <li>elementsEqual (集合內元素順序是否完全相等)</li>
</ol>

<h5 id="section-3">移除</h5>

<ol>
  <li>removeAll</li>
  <li>removeIf</li>
  <li>retainAll</li>
</ol>

<h5 id="section-4">其它</h5>

<ol>
  <li>consumingIterable</li>
  <li>cycle</li>
  <li>unmodifiableIterable</li>
  <li>frequency</li>
</ol>

<h5 id="section-5">轉換</h5>

<ol>
  <li><strong>forArray</strong></li>
  <li>transform</li>
  <li><strong>forEnumeration</strong></li>
</ol>

<h3 id="transform">transform</h3>

<p>將collection內容的類型轉換成另一種類型(ex: Double → String).<br />
^<a href="#fn__1">1)</a>^</p>

<pre><code>    List&lt;String&gt; list1 = Lists.newArrayList("1", "2", "3");
    List&lt;Double&gt; list2 = Lists.transform(list1, new Function&lt;String, Double&gt;() {
       public Double apply(String from) {
          return Double.parseDouble(from);
       }
    });
    System.out.println(Joiner.on(" | ").join(list2));
     
    // result
    // 1.0 | 2.0 | 3.0

</code></pre>

<h3 id="filter">Filter</h3>

<p>利用<strong>Predicate</strong>對collection進行過濾</p>

<pre><code>    List&lt;String&gt; list = Lists.newArrayList("A100", "B100", null, "B200");
    Iterable&lt;String&gt; filtered = Iterables.filter(list, new Predicate&lt;String&gt;() {
       public boolean apply(String input) {
          return input == null || input.startsWith("B");
       }
    });
     
    System.out.println(Joiner.on("; ").useForNull("B000").join(filtered));
     
    // result
    // B100; B000; B200

</code></pre>

<h3 id="ording">Ording</h3>

<p>利用<strong>Compartor</strong>進行排序,也提供<code>max(),min()</code>等功能</p>

<pre><code> Ordering.from(lastNameComparator);

</code></pre>

<h3 id="comparatorordering">ComparatorOrdering</h3>

<p>除了基本的比較功能外，還有<strong>Ordering</strong>的功能</p>

<h3 id="predicate">Predicate</h3>

<pre><code>    import static com.google.common.base.Predicates.and;
    import static com.google.common.base.Predicates.compose;
    import static com.google.common.base.Predicates.in;
    import static com.google.common.base.Predicates.not;
     
    List&lt;String&gt; list1 = Lists.newArrayList("1", "2", "3");
    List&lt;String&gt; list2 = Lists.newArrayList("1", "4", "5");
    List&lt;String&gt; list3 = Lists.newArrayList("1", "4", "6");
     
    boolean result = and( not( in(list1) ), in(list2), in(list3)).apply("1");
     
    System.out.println(result);  // false
     
    List&lt;String&gt; list1 = Lists.newArrayList("A1", "A2", "A3");
    boolean result = compose(in(list1), new Function&lt;String, String&gt;() {
       public String apply(String from) {
          return "A" + from;
       }
    }).apply("1");
     
    System.out.println(result);  // true

</code></pre>

<h3 id="combining-and-modifying-comparators">Combining and Modifying Comparators</h3>

<pre><code>    public class Person {
       private String firstName;
       private String lastName;
     
       public Person(String firstName, String lastName) {
          this.setFirstName(firstName);
          this.setLastName(lastName);
       }
     
       @Override
       public String toString() {
          return getFirstName() + " " + getLastName();
       }
     
       public void setFirstName(String firstName) {
          this.firstName = firstName;
       }
     
       public String getFirstName() {
          return firstName;
       }
     
       public void setLastName(String lastName) {
          this.lastName = lastName;
       }
     
       public String getLastName() {
          return lastName;
       }
    }

</code></pre>

<pre><code>    List&lt;Person&gt; persons = Lists.newArrayList(
       new Person("Alfred", "Hitchcock"),
       null,
       new Person("Homer", "Simpson"),
       new Person("Peter", "Fox"),
       new Person("Bart", "Simpson"));
     
    Comparator&lt;Person&gt; lastNameComparator = new Comparator&lt;Person&gt;() {
       public int compare(Person p1, Person p2) {
          return p1.getLastName().compareTo(p2.getLastName());
       }
    };
     
    Comparator&lt;Person&gt; firstNameComparator = new Comparator&lt;Person&gt;() {
       public int compare(Person p1, Person p2) {
          return p1.getFirstName().compareTo(p2.getFirstName());
       }
    };
     
    // order by last name ascending
    Ordering&lt;Person&gt; ordering = Ordering.from(lastNameComparator);
    System.out.println(ordering.nullsLast().sortedCopy(persons));
     
    // order by last name descending, first name ascending
    ordering = ordering.reverse().compound(firstNameComparator);
    System.out.println(ordering.nullsLast().sortedCopy(persons));

</code></pre>

<h3 id="constraints">Constraints</h3>

<p>TBD</p>

<h3 id="forwardingobject">ForwardingObject</h3>

<p><img src="http://blog.kent-chiu.com/images/2012-03-20/guava_101_001.png" alt="guava_101_001.png" /></p>

<p>ForwardingObject是一種<a href="http://en.wikipedia.org/wiki/Decorator_pattern" title="http://en.wikipedia.org/wiki/Decorator_pattern">Decorator_pattern</a>的實作，而在guava裡，extends自ForwardingObject的類別都是collection，也就是說<br />
在guava裡ForwardingObject是設計來改寫collection的預設行為的。</p>

<p>example: 改變原來LIST的的add()<br />
method，如果加入null的話，就採用預設值”UNKNOWN”</p>

<pre><code>import java.util.*;
import com.google.common.collect.*;
 
public class ListWithDefault&lt;E&gt; extends ForwardingList&lt;E&gt; {
    final E defaultValue;
    final List&lt;E&gt; delegate;
 
    ListWithDefault(List&lt;E&gt; delegate, E defaultValue) {
        this.delegate = delegate;
        this.defaultValue = defaultValue;
    }
    @Override protected List delegate() {
        return delegate;
    }
    @Override public E get(int index) {
        E v = super.get(index);
        return (v == null ? defaultValue : v);
    }
    @Override public Iterator&lt;E&gt; iterator() {
        final Iterator&lt;E&gt; iter = super.iterator();
        return new ForwardingIterator&lt;E&gt;() {
            @Override protected Iterator&lt;E&gt; delegate() {
                return iter;
            }
            @Override public E next() {
                E v = super.next();
                return (v == null ? defaultValue : v); 
            }
        };
    }
}
 
public static void main(String[] args) {
    List&lt;String&gt; names = new ListWithDefault&lt;String&gt;(
        Arrays.asList("Alice", null, "Bob", "Carol", null),
        "UNKNOWN"
    );
 
    for (String name : names) {
        System.out.println(name);
    }
    // Alice
    // UNKNOWN
    // Bob
    // Carol
    // UNKNOWN
 
    System.out.println(names);
    // [Alice, null, Bob, Carol, null]
}

</code></pre>

<p>Decorator<br />
Pattern的精神在不改變原來類別的行為的基礎下，為該類別加入其他功能。<br />
比如說，原來的類別可以印出 “hello<br />
word”，如果套入一個叫”StarDecorator”，那原來的輸出會變成 “* hello word<br />
*” 如果再套上”BarDecorator”那輸出就會變成 “|* hello word *|”</p>

<p>也就是不改成原來印出 “hello word”的功能下，裝飾上星型邊框<br />
，再裝飾上條狀邊框，這也就是這個pattern的名稱的由來，</p>

<h1 id="resources">Resources</h1>

<ul>
  <li><a href="http://code.google.com/p/guava-libraries/" title="http://code.google.com/p/guava-libraries/">Guava<br />
Home</a></li>
  <li><a href="http://code.google.com/p/guava-libraries/wiki/ExplainedContents" title="http://code.google.com/p/guava-libraries/wiki/ExplainedContents">各功能的使用介紹</a></li>
  <li><a href="http://jnb.ociweb.com/jnb/jnbApr2010.html" title="http://jnb.ociweb.com/jnb/jnbApr2010.html">Examples</a></li>
  <li><a href="http://jnb.ociweb.com/jnb/jnbFeb2009.html" title="http://jnb.ociweb.com/jnb/jnbFeb2009.html">Google<br />
Collections</a></li>
  <li><a href="http://www.copperykeenclaws.com/googles-guava-java-the-easy-parts/" title="http://www.copperykeenclaws.com/googles-guava-java-the-easy-parts/">Google’s guava java: the easy<br />
parts</a></li>
  <li><a href="http://stackoverflow.com/questions/tagged/guava" title="http://stackoverflow.com/questions/tagged/guava">guava on<br />
stackoverflow</a></li>
  <li>Using the Google Collections Library for Java<br />
<a href="http://www.youtube.com/watch?v=ZeO_J2OcHYM" title="http://www.youtube.com/watch?v=ZeO_J2OcHYM">part1</a><br />
<a href="http://www.youtube.com/watch?v=9ni_KEkHfto" title="http://www.youtube.com/watch?v=9ni_KEkHfto">part2</a></li>
  <li>带你领略 Google Collections <a href="http://jubin2002.javaeye.com/blog/471661" title="http://jubin2002.javaeye.com/blog/471661">part<br />
1</a><br />
<a href="http://jubin2002.javaeye.com/blog/471698" title="http://jubin2002.javaeye.com/blog/471698">part<br />
2</a></li>
  <li>MapMaker Usage<br />
<a href="http://norther.javaeye.com/blog/670414" title="http://norther.javaeye.com/blog/670414">http://norther.javaeye.com/blog/670414</a></li>
  <li><a href="http://www.ibm.com/developerworks/cn/java/j-lo-googlecollection/index.html?ca=drs-" title="http://www.ibm.com/developerworks/cn/java/j-lo-googlecollection/index.html?ca=drs-">Google Guava Collections<br />
使用介绍</a>
    <ul>
      <li>IBM 中國上介紹guava的文章</li>
    </ul>
  </li>
  <li><a href="http://www.tfnico.com/presentations/google-guava" title="http://www.tfnico.com/presentations/google-guava">一些guava使用上的介紹</a></li>
</ul>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Kent's Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Kent's Blog</li>
          <li><a href="mailto:kent.cwg@gmail.com">kent.cwg@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/kentchiu">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">kentchiu</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/kentchiu">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">kentchiu</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Kent的學習筆記</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
